var Or=Object.defineProperty;var ss=r=>{throw TypeError(r)};var Rr=(r,e,t)=>e in r?Or(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var p=(r,e,t)=>Rr(r,typeof e!="symbol"?e+"":e,t),kt=(r,e,t)=>e.has(r)||ss("Cannot "+t);var k=(r,e,t)=>(kt(r,e,"read from private field"),t?t.call(r):e.get(r)),N=(r,e,t)=>e.has(r)?ss("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),H=(r,e,t,s)=>(kt(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),R=(r,e,t)=>(kt(r,e,"access private method"),t);class Pr{constructor(e,t,s){this.eventTarget=e,this.eventName=t,this.eventOptions=s,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=Fr(e);for(const s of this.bindings){if(t.immediatePropagationStopped)break;s.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{const s=e.index,i=t.index;return s<i?-1:s>i?1:0})}}function Fr(r){if("immediatePropagationStopped"in r)return r;{const{stopImmediatePropagation:e}=r;return Object.assign(r,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}class Ir{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,s={}){this.application.handleError(e,`Error ${t}`,s)}clearEventListenersForBinding(e){const t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){const{eventTarget:t,eventName:s,eventOptions:i}=e,n=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(s,i);n.delete(o),n.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:s,eventOptions:i}=e;return this.fetchEventListener(t,s,i)}fetchEventListener(e,t,s){const i=this.fetchEventListenerMapForEventTarget(e),n=this.cacheKey(t,s);let o=i.get(n);return o||(o=this.createEventListener(e,t,s),i.set(n,o)),o}createEventListener(e,t,s){const i=new Pr(e,t,s);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const s=[e];return Object.keys(t).sort().forEach(i=>{s.push(`${t[i]?"":"!"}${i}`)}),s.join(":")}}const Dr={stop({event:r,value:e}){return e&&r.stopPropagation(),!0},prevent({event:r,value:e}){return e&&r.preventDefault(),!0},self({event:r,value:e,element:t}){return e?t===r.target:!0}},Br=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Nr(r){const t=r.trim().match(Br)||[];let s=t[2],i=t[3];return i&&!["keydown","keyup","keypress"].includes(s)&&(s+=`.${i}`,i=""),{eventTarget:qr(t[4]),eventName:s,eventOptions:t[7]?Hr(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||i}}function qr(r){if(r=="window")return window;if(r=="document")return document}function Hr(r){return r.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function Vr(r){if(r==window)return"window";if(r==document)return"document"}function Vt(r){return r.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function Rt(r){return Vt(r.replace(/--/g,"-").replace(/__/g,"_"))}function it(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Ts(r){return r.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function $r(r){return r.match(/[^\s]+/g)||[]}function rs(r){return r!=null}function Pt(r,e){return Object.prototype.hasOwnProperty.call(r,e)}const is=["meta","ctrl","alt","shift"];class xr{constructor(e,t,s,i){this.element=e,this.index=t,this.eventTarget=s.eventTarget||e,this.eventName=s.eventName||Ur(e)||ct("missing event name"),this.eventOptions=s.eventOptions||{},this.identifier=s.identifier||ct("missing identifier"),this.methodName=s.methodName||ct("missing method name"),this.keyFilter=s.keyFilter||"",this.schema=i}static forToken(e,t){return new this(e.element,e.index,Nr(e.content),t)}toString(){const e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;const t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;const s=t.filter(i=>!is.includes(i))[0];return s?(Pt(this.keyMappings,s)||ct(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[s].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;const t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){const e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:s,value:i}of Array.from(this.element.attributes)){const n=s.match(t),o=n&&n[1];o&&(e[Vt(o)]=jr(i))}return e}get eventTargetName(){return Vr(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){const[s,i,n,o]=is.map(u=>t.includes(u));return e.metaKey!==s||e.ctrlKey!==i||e.altKey!==n||e.shiftKey!==o}}const ns={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:r=>r.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Ur(r){const e=r.tagName.toLowerCase();if(e in ns)return ns[e](r)}function ct(r){throw new Error(r)}function jr(r){try{return JSON.parse(r)}catch{return r}}class Wr{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){const t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){const{element:t}=this.action,{actionDescriptorFilters:s}=this.context.application,{controller:i}=this.context;let n=!0;for(const[o,u]of Object.entries(this.eventOptions))if(o in s){const h=s[o];n=n&&h({name:o,value:u,event:e,element:t,controller:i})}else continue;return n}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){const{target:t,currentTarget:s}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:s,action:this.methodName})}catch(i){const{identifier:n,controller:o,element:u,index:h}=this,d={identifier:n,controller:o,element:u,index:h,event:e};this.context.handleError(i,`invoking action "${this.action}"`,d)}}willBeInvokedByEvent(e){const t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Ms{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(s=>this.processMutations(s))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(const t of Array.from(e)){const s=this.elementFromNode(t);s&&this.processTree(s,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const s=this.elementFromNode(t);s&&this.elementIsActive(s)&&this.processTree(s,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const s of this.matchElementsInTree(e))t.call(this,s)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class Cs{constructor(e,t,s){this.attributeName=t,this.delegate=s,this.elementObserver=new Ms(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],s=Array.from(e.querySelectorAll(this.selector));return t.concat(s)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}function _r(r,e,t){Ls(r,e).add(t)}function zr(r,e,t){Ls(r,e).delete(t),Kr(r,e)}function Ls(r,e){let t=r.get(e);return t||(t=new Set,r.set(e,t)),t}function Kr(r,e){const t=r.get(e);t!=null&&t.size==0&&r.delete(e)}class ge{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,s)=>t.concat(Array.from(s)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,s)=>t+s.size,0)}add(e,t){_r(this.valuesByKey,e,t)}delete(e,t){zr(this.valuesByKey,e,t)}has(e,t){const s=this.valuesByKey.get(e);return s!=null&&s.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(s=>s.has(e))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,s])=>s.has(e)).map(([t,s])=>t)}}class Jr{constructor(e,t,s,i){this._selector=t,this.details=i,this.elementObserver=new Ms(e,this),this.delegate=s,this.matchesByElement=new ge}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){const{selector:t}=this;if(t){const s=e.matches(t);return this.delegate.selectorMatchElement?s&&this.delegate.selectorMatchElement(e,this.details):s}else return!1}matchElementsInTree(e){const{selector:t}=this;if(t){const s=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(t)).filter(n=>this.matchElement(n));return s.concat(i)}else return[]}elementMatched(e){const{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){const t=this.matchesByElement.getKeysForValue(e);for(const s of t)this.selectorUnmatched(e,s)}elementAttributeChanged(e,t){const{selector:s}=this;if(s){const i=this.matchElement(e),n=this.matchesByElement.has(s,e);i&&!n?this.selectorMatched(e,s):!i&&n&&this.selectorUnmatched(e,s)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}}class Xr{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(s=>this.processMutations(s))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const s=this.delegate.getStringMapKeyForAttribute(e);if(s!=null){this.stringMap.has(e)||this.stringMapKeyAdded(s,e);const i=this.element.getAttribute(e);if(this.stringMap.get(e)!=i&&this.stringMapValueChanged(i,s,t),i==null){const n=this.stringMap.get(e);this.stringMap.delete(e),n&&this.stringMapKeyRemoved(s,e,n)}else this.stringMap.set(e,i)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,s){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,s)}stringMapKeyRemoved(e,t,s){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,s)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class ks{constructor(e,t,s){this.attributeObserver=new Cs(e,t,this),this.delegate=s,this.tokensByElement=new ge}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,s]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(s)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),s=this.readTokensForElement(e),i=Qr(t,s).findIndex(([n,o])=>!Yr(n,o));return i==-1?[[],[]]:[t.slice(i),s.slice(i)]}readTokensForElement(e){const t=this.attributeName,s=e.getAttribute(t)||"";return Gr(s,e,t)}}function Gr(r,e,t){return r.trim().split(/\s+/).filter(s=>s.length).map((s,i)=>({element:e,attributeName:t,content:s,index:i}))}function Qr(r,e){const t=Math.max(r.length,e.length);return Array.from({length:t},(s,i)=>[r[i],e[i]])}function Yr(r,e){return r&&e&&r.index==e.index&&r.content==e.content}class Os{constructor(e,t,s){this.tokenListObserver=new ks(e,t,this),this.delegate=s,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:s}=this.fetchParseResultForToken(e);s&&(this.fetchValuesByTokenForElement(t).set(e,s),this.delegate.elementMatchedValue(t,s))}tokenUnmatched(e){const{element:t}=e,{value:s}=this.fetchParseResultForToken(e);s&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,s))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}}class Zr{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Os(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new Wr(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){const t=xr.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class ei{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new Xr(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const s=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,s.writer(this.receiver[e]),s.writer(s.defaultValue))}stringMapValueChanged(e,t,s){const i=this.valueDescriptorNameMap[t];e!==null&&(s===null&&(s=i.writer(i.defaultValue)),this.invokeChangedCallback(t,e,s))}stringMapKeyRemoved(e,t,s){const i=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,i.writer(this.receiver[e]),s):this.invokeChangedCallback(e,i.writer(i.defaultValue),s)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:s,writer:i}of this.valueDescriptors)s!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,i(s),void 0)}invokeChangedCallback(e,t,s){const i=`${e}Changed`,n=this.receiver[i];if(typeof n=="function"){const o=this.valueDescriptorNameMap[e];try{const u=o.reader(t);let h=s;s&&(h=o.reader(s)),n.call(this.receiver,u,h)}catch(u){throw u instanceof TypeError&&(u.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${u.message}`),u}}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{const s=this.valueDescriptorMap[t];e[s.name]=s}),e}hasValue(e){const t=this.valueDescriptorNameMap[e],s=`has${it(t.name)}`;return this.receiver[s]}}class ti{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new ge}start(){this.tokenListObserver||(this.tokenListObserver=new ks(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var s;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(s=this.tokenListObserver)===null||s===void 0||s.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var s;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(s=this.tokenListObserver)===null||s===void 0||s.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function nt(r,e){const t=Rs(r);return Array.from(t.reduce((s,i)=>(ri(i,e).forEach(n=>s.add(n)),s),new Set))}function si(r,e){return Rs(r).reduce((s,i)=>(s.push(...ii(i,e)),s),[])}function Rs(r){const e=[];for(;r;)e.push(r),r=Object.getPrototypeOf(r);return e.reverse()}function ri(r,e){const t=r[e];return Array.isArray(t)?t:[]}function ii(r,e){const t=r[e];return t?Object.keys(t).map(s=>[s,t[s]]):[]}class ni{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new ge,this.outletElementsByName=new ge,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:s}){const i=this.getOutlet(e,s);i&&this.connectOutlet(i,e,s)}selectorUnmatched(e,t,{outletName:s}){const i=this.getOutletFromMap(e,s);i&&this.disconnectOutlet(i,e,s)}selectorMatchElement(e,{outletName:t}){const s=this.selector(t),i=this.hasOutlet(e,t),n=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return s?i&&n&&e.matches(s):!1}elementMatchedAttribute(e,t){const s=this.getOutletNameFromOutletAttributeName(t);s&&this.updateSelectorObserverForOutlet(s)}elementAttributeValueChanged(e,t){const s=this.getOutletNameFromOutletAttributeName(t);s&&this.updateSelectorObserverForOutlet(s)}elementUnmatchedAttribute(e,t){const s=this.getOutletNameFromOutletAttributeName(t);s&&this.updateSelectorObserverForOutlet(s)}connectOutlet(e,t,s){var i;this.outletElementsByName.has(s,t)||(this.outletsByName.add(s,e),this.outletElementsByName.add(s,t),(i=this.selectorObserverMap.get(s))===null||i===void 0||i.pause(()=>this.delegate.outletConnected(e,t,s)))}disconnectOutlet(e,t,s){var i;this.outletElementsByName.has(s,t)&&(this.outletsByName.delete(s,e),this.outletElementsByName.delete(s,t),(i=this.selectorObserverMap.get(s))===null||i===void 0||i.pause(()=>this.delegate.outletDisconnected(e,t,s)))}disconnectAllOutlets(){for(const e of this.outletElementsByName.keys)for(const t of this.outletElementsByName.getValuesForKey(e))for(const s of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(s,t,e)}updateSelectorObserverForOutlet(e){const t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){const t=this.selector(e),s=new Jr(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,s),s.start()}setupAttributeObserverForOutlet(e){const t=this.attributeNameForOutletName(e),s=new Cs(this.scope.element,t,this);this.attributeObserverMap.set(e,s),s.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){const e=new ge;return this.router.modules.forEach(t=>{const s=t.definition.controllerConstructor;nt(s,"outlets").forEach(n=>e.add(n,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(s=>s.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class oi{constructor(e,t){this.logDebugActivity=(s,i={})=>{const{identifier:n,controller:o,element:u}=this;i=Object.assign({identifier:n,controller:o,element:u},i),this.application.logDebugActivity(this.identifier,s,i)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new Zr(this,this.dispatcher),this.valueObserver=new ei(this,this.controller),this.targetObserver=new ti(this,this),this.outletObserver=new ni(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(s){this.handleError(s,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,s={}){const{identifier:i,controller:n,element:o}=this;s=Object.assign({identifier:i,controller:n,element:o},s),this.application.handleError(e,`Error ${t}`,s)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,s){this.invokeControllerMethod(`${Rt(s)}OutletConnected`,e,t)}outletDisconnected(e,t,s){this.invokeControllerMethod(`${Rt(s)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){const s=this.controller;typeof s[e]=="function"&&s[e](...t)}}function ai(r){return li(r,ci(r))}function li(r,e){const t=fi(r),s=hi(r.prototype,e);return Object.defineProperties(t.prototype,s),t}function ci(r){return nt(r,"blessings").reduce((t,s)=>{const i=s(r);for(const n in i){const o=t[n]||{};t[n]=Object.assign(o,i[n])}return t},{})}function hi(r,e){return di(e).reduce((t,s)=>{const i=ui(r,e,s);return i&&Object.assign(t,{[s]:i}),t},{})}function ui(r,e,t){const s=Object.getOwnPropertyDescriptor(r,t);if(!(s&&"value"in s)){const n=Object.getOwnPropertyDescriptor(e,t).value;return s&&(n.get=s.get||n.get,n.set=s.set||n.set),n}}const di=typeof Object.getOwnPropertySymbols=="function"?r=>[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)]:Object.getOwnPropertyNames,fi=(()=>{function r(t){function s(){return Reflect.construct(t,arguments,new.target)}return s.prototype=Object.create(t.prototype,{constructor:{value:s}}),Reflect.setPrototypeOf(s,t),s}function e(){const s=r(function(){this.a.call(this)});return s.prototype.a=function(){},new s}try{return e(),r}catch{return s=>class extends s{}}})();function mi(r){return{identifier:r.identifier,controllerConstructor:ai(r.controllerConstructor)}}class pi{constructor(e,t){this.application=e,this.definition=mi(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new oi(this,e),this.contextsByScope.set(e,t)),t}}class gi{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){const t=this.data.get(this.getDataKey(e))||"";return $r(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class bi{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const s=this.getAttributeNameForKey(e);return this.element.setAttribute(s,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Ts(e)}`}}class vi{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,s){let i=this.warnedKeysByObject.get(e);i||(i=new Set,this.warnedKeysByObject.set(e,i)),i.has(t)||(i.add(t),this.logger.warn(s,e))}}function Ft(r,e){return`[${r}~="${e}"]`}class yi{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,s)=>t||this.findTarget(s)||this.findLegacyTarget(s),void 0)}findAll(...e){return e.reduce((t,s)=>[...t,...this.findAllTargets(s),...this.findAllLegacyTargets(s)],[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){const t=this.schema.targetAttributeForScope(this.identifier);return Ft(t,e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(s=>this.deprecate(s,e))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return Ft(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:s}=this,i=this.schema.targetAttribute,n=this.schema.targetAttributeForScope(s);this.guide.warn(e,`target:${t}`,`Please replace ${i}="${s}.${t}" with ${n}="${t}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class Ei{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,s)=>t||this.findOutlet(s),void 0)}findAll(...e){return e.reduce((t,s)=>[...t,...this.findAllOutlets(s)],[])}getSelectorForOutletName(e){const t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){const t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){const t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,t))}matchesElement(e,t,s){const i=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&i.split(" ").includes(s)}}class $t{constructor(e,t,s,i){this.targets=new yi(this),this.classes=new gi(this),this.data=new bi(this),this.containsElement=n=>n.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=s,this.guide=new vi(i),this.outlets=new Ei(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Ft(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new $t(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class wi{constructor(e,t,s){this.element=e,this.schema=t,this.delegate=s,this.valueListObserver=new Os(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:s}=e;return this.parseValueForElementAndIdentifier(t,s)}parseValueForElementAndIdentifier(e,t){const s=this.fetchScopesByIdentifierForElement(e);let i=s.get(t);return i||(i=this.delegate.createScopeForElementAndIdentifier(e,t),s.set(t,i)),i}elementMatchedValue(e,t){const s=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,s),s==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const s=this.scopeReferenceCounts.get(t);s&&(this.scopeReferenceCounts.set(t,s-1),s==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class Si{constructor(e){this.application=e,this.scopeObserver=new wi(this.element,this.schema,this),this.scopesByIdentifier=new ge,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new pi(this.application,e);this.connectModule(t);const s=e.controllerConstructor.afterLoad;s&&s.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const s=this.modulesByIdentifier.get(t);if(s)return s.contexts.find(i=>i.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){const s=this.scopeObserver.parseValueForElementAndIdentifier(e,t);s?this.scopeObserver.elementMatchedValue(s.element,s):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,s){this.application.handleError(e,t,s)}createScopeForElementAndIdentifier(e,t){return new $t(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(s=>e.connectContextForScope(s))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(s=>e.disconnectContextForScope(s))}}const Ai={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:r=>`data-${r}-target`,outletAttributeForScope:(r,e)=>`data-${r}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},os("abcdefghijklmnopqrstuvwxyz".split("").map(r=>[r,r]))),os("0123456789".split("").map(r=>[r,r])))};function os(r){return r.reduce((e,[t,s])=>Object.assign(Object.assign({},e),{[t]:s}),{})}class Ti{constructor(e=document.documentElement,t=Ai){this.logger=console,this.debug=!1,this.logDebugActivity=(s,i,n={})=>{this.debug&&this.logFormattedMessage(s,i,n)},this.element=e,this.schema=t,this.dispatcher=new Ir(this),this.router=new Si(this),this.actionDescriptorFilters=Object.assign({},Dr)}static start(e,t){const s=new this(e,t);return s.start(),s}async start(){await Mi(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(i=>{i.controllerConstructor.shouldLoad&&this.router.loadDefinition(i)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(i=>this.router.unloadIdentifier(i))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){const s=this.router.getContextForElementAndIdentifier(e,t);return s?s.controller:null}handleError(e,t,s){var i;this.logger.error(`%s

%o

%o`,t,e,s),(i=window.onerror)===null||i===void 0||i.call(window,t,"",0,0,e)}logFormattedMessage(e,t,s={}){s=Object.assign({application:this},s),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},s)),this.logger.groupEnd()}}function Mi(){return new Promise(r=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>r()):r()})}function Ci(r){return nt(r,"classes").reduce((t,s)=>Object.assign(t,Li(s)),{})}function Li(r){return{[`${r}Class`]:{get(){const{classes:e}=this;if(e.has(r))return e.get(r);{const t=e.getAttributeName(r);throw new Error(`Missing attribute "${t}"`)}}},[`${r}Classes`]:{get(){return this.classes.getAll(r)}},[`has${it(r)}Class`]:{get(){return this.classes.has(r)}}}}function ki(r){return nt(r,"outlets").reduce((t,s)=>Object.assign(t,Oi(s)),{})}function as(r,e,t){return r.application.getControllerForElementAndIdentifier(e,t)}function ls(r,e,t){let s=as(r,e,t);if(s||(r.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),s=as(r,e,t),s))return s}function Oi(r){const e=Rt(r);return{[`${e}Outlet`]:{get(){const t=this.outlets.find(r),s=this.outlets.getSelectorForOutletName(r);if(t){const i=ls(this,t,r);if(i)return i;throw new Error(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${s}".`)}},[`${e}Outlets`]:{get(){const t=this.outlets.findAll(r);return t.length>0?t.map(s=>{const i=ls(this,s,r);if(i)return i;console.warn(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`,s)}).filter(s=>s):[]}},[`${e}OutletElement`]:{get(){const t=this.outlets.find(r),s=this.outlets.getSelectorForOutletName(r);if(t)return t;throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${s}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(r)}},[`has${it(e)}Outlet`]:{get(){return this.outlets.has(r)}}}}function Ri(r){return nt(r,"targets").reduce((t,s)=>Object.assign(t,Pi(s)),{})}function Pi(r){return{[`${r}Target`]:{get(){const e=this.targets.find(r);if(e)return e;throw new Error(`Missing target element "${r}" for "${this.identifier}" controller`)}},[`${r}Targets`]:{get(){return this.targets.findAll(r)}},[`has${it(r)}Target`]:{get(){return this.targets.has(r)}}}}function Fi(r){const e=si(r,"values"),t={valueDescriptorMap:{get(){return e.reduce((s,i)=>{const n=Ps(i,this.identifier),o=this.data.getAttributeNameForKey(n.key);return Object.assign(s,{[o]:n})},{})}}};return e.reduce((s,i)=>Object.assign(s,Ii(i)),t)}function Ii(r,e){const t=Ps(r,e),{key:s,name:i,reader:n,writer:o}=t;return{[i]:{get(){const u=this.data.get(s);return u!==null?n(u):t.defaultValue},set(u){u===void 0?this.data.delete(s):this.data.set(s,o(u))}},[`has${it(i)}`]:{get(){return this.data.has(s)||t.hasCustomDefaultValue}}}}function Ps([r,e],t){return qi({controller:t,token:r,typeDefinition:e})}function bt(r){switch(r){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Ue(r){switch(typeof r){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(r))return"array";if(Object.prototype.toString.call(r)==="[object Object]")return"object"}function Di(r){const{controller:e,token:t,typeObject:s}=r,i=rs(s.type),n=rs(s.default),o=i&&n,u=i&&!n,h=!i&&n,d=bt(s.type),b=Ue(r.typeObject.default);if(u)return d;if(h)return b;if(d!==b){const L=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${L}" must match the defined type "${d}". The provided default value of "${s.default}" is of type "${b}".`)}if(o)return d}function Bi(r){const{controller:e,token:t,typeDefinition:s}=r,n=Di({controller:e,token:t,typeObject:s}),o=Ue(s),u=bt(s),h=n||o||u;if(h)return h;const d=e?`${e}.${s}`:t;throw new Error(`Unknown value type "${d}" for "${t}" value`)}function Ni(r){const e=bt(r);if(e)return cs[e];const t=Pt(r,"default"),s=Pt(r,"type"),i=r;if(t)return i.default;if(s){const{type:n}=i,o=bt(n);if(o)return cs[o]}return r}function qi(r){const{token:e,typeDefinition:t}=r,s=`${Ts(e)}-value`,i=Bi(r);return{type:i,key:s,name:Vt(s),get defaultValue(){return Ni(t)},get hasCustomDefaultValue(){return Ue(t)!==void 0},reader:Hi[i],writer:hs[i]||hs.default}}const cs={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Hi={array(r){const e=JSON.parse(r);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${r}" of type "${Ue(e)}"`);return e},boolean(r){return!(r=="0"||String(r).toLowerCase()=="false")},number(r){return Number(r.replace(/_/g,""))},object(r){const e=JSON.parse(r);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${r}" of type "${Ue(e)}"`);return e},string(r){return r}},hs={default:Vi,array:us,object:us};function us(r){return JSON.stringify(r)}function Vi(r){return`${r}`}class ye{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:s={},prefix:i=this.identifier,bubbles:n=!0,cancelable:o=!0}={}){const u=i?`${i}:${e}`:e,h=new CustomEvent(u,{detail:s,bubbles:n,cancelable:o});return t.dispatchEvent(h),h}}ye.blessings=[Ci,Ri,Fi,ki];ye.targets=[];ye.outlets=[];ye.values={};class $i{constructor(e,t,s){this.isResolved=!1,this.promise=e,this.promise.then(i=>(this.isResolved=!0,i)),this.actions=t,this.updatedModels=s}containsOneOfActions(e){return this.actions.filter(t=>e.includes(t)).length>0}areAnyModelsUpdated(e){return this.updatedModels.filter(t=>e.includes(t)).length>0}}class xi{constructor(e,t="post"){this.url=e,this.method=t}buildRequest(e,t,s,i,n,o){const u=this.url.split("?");let[h]=u;const[,d]=u,b=new URLSearchParams(d||""),L={};L.headers={Accept:"application/vnd.live-component+html","X-Requested-With":"XMLHttpRequest"};const w=Object.entries(o).reduce((P,O)=>P+O.length,0),q=Object.keys(i).length>0;if(t.length===0&&w===0&&this.method==="get"&&this.willDataFitInUrl(JSON.stringify(e),JSON.stringify(s),b,JSON.stringify(i),JSON.stringify(n)))b.set("props",JSON.stringify(e)),b.set("updated",JSON.stringify(s)),Object.keys(n).length>0&&b.set("propsFromParent",JSON.stringify(n)),q&&b.set("children",JSON.stringify(i)),L.method="GET";else{L.method="POST";const P={props:e,updated:s};Object.keys(n).length>0&&(P.propsFromParent=n),q&&(P.children=i),t.length>0&&(t.length===1?(P.args=t[0].args,h+=`/${encodeURIComponent(t[0].name)}`):(h+="/_batch",P.actions=t));const O=new FormData;O.append("data",JSON.stringify(P));for(const[C,g]of Object.entries(o)){const v=g.length;for(let f=0;f<v;++f)O.append(C,g[f])}L.body=O}const I=b.toString();return{url:`${h}${I.length>0?`?${I}`:""}`,fetchOptions:L}}willDataFitInUrl(e,t,s,i,n){return(new URLSearchParams(e+t+i+n).toString()+s.toString()).length<1500}}class Ui{constructor(e,t="post"){this.requestBuilder=new xi(e,t)}makeRequest(e,t,s,i,n,o){const{url:u,fetchOptions:h}=this.requestBuilder.buildRequest(e,t,s,i,n,o);return new $i(fetch(u,h),t.map(d=>d.name),Object.keys(s))}}class ji{constructor(e){this.response=e}async getBody(){return this.body||(this.body=await this.response.text()),this.body}}function dt(r){return r.innerHTML?r.outerHTML.slice(0,r.outerHTML.indexOf(r.innerHTML)):r.outerHTML}let xt=new WeakMap,je=new Map;const Wi=r=>{xt.set(r.element,r),je.set(r,r.name)},_i=r=>{xt.delete(r.element),je.delete(r)},zi=(r,e,t)=>{const s=[];return je.forEach((i,n)=>{e&&(r===n||!n.element.contains(r.element))||t&&i!==t||s.push(n)}),s},Ki=r=>{const e=[];return je.forEach((t,s)=>{if(r===s||!r.element.contains(s.element))return;let i=!1;je.forEach((n,o)=>{i||o!==s&&o.element.contains(s.element)&&(i=!0)}),e.push(s)}),e},Ji=r=>{let e=r.element.parentElement;for(;e;){const t=xt.get(e);if(t)return t;e=e.parentElement}return null};class Xi{constructor(){this.hooks=new Map}register(e,t){const s=this.hooks.get(e)||[];s.push(t),this.hooks.set(e,s)}unregister(e,t){const s=this.hooks.get(e)||[],i=s.indexOf(t);i!==-1&&(s.splice(i,1),this.hooks.set(e,s))}triggerHook(e,...t){(this.hooks.get(e)||[]).forEach(i=>i(...t))}}class ds{constructor(){this.changedItems=new Map,this.removedItems=new Map}setItem(e,t,s){if(this.removedItems.has(e)){const i=this.removedItems.get(e);if(this.removedItems.delete(e),i.original===t)return}if(this.changedItems.has(e)){const i=this.changedItems.get(e);if(i.original===t){this.changedItems.delete(e);return}this.changedItems.set(e,{original:i.original,new:t});return}this.changedItems.set(e,{original:s,new:t})}removeItem(e,t){let s=t;this.changedItems.has(e)&&(s=this.changedItems.get(e).original,this.changedItems.delete(e),s===null)||this.removedItems.has(e)||this.removedItems.set(e,{original:s})}getChangedItems(){return Array.from(this.changedItems,([e,{new:t}])=>({name:e,value:t}))}getRemovedItems(){return Array.from(this.removedItems.keys())}isEmpty(){return this.changedItems.size===0&&this.removedItems.size===0}}class Gi{constructor(){this.addedClasses=new Set,this.removedClasses=new Set,this.styleChanges=new ds,this.attributeChanges=new ds}addClass(e){this.removedClasses.delete(e)||this.addedClasses.add(e)}removeClass(e){this.addedClasses.delete(e)||this.removedClasses.add(e)}addStyle(e,t,s){this.styleChanges.setItem(e,t,s)}removeStyle(e,t){this.styleChanges.removeItem(e,t)}addAttribute(e,t,s){this.attributeChanges.setItem(e,t,s)}removeAttribute(e,t){this.attributeChanges.removeItem(e,t)}getAddedClasses(){return[...this.addedClasses]}getRemovedClasses(){return[...this.removedClasses]}getChangedStyles(){return this.styleChanges.getChangedItems()}getRemovedStyles(){return this.styleChanges.getRemovedItems()}getChangedAttributes(){return this.attributeChanges.getChangedItems()}getRemovedAttributes(){return this.attributeChanges.getRemovedItems()}applyToElement(e){e.classList.add(...this.addedClasses),e.classList.remove(...this.removedClasses),this.styleChanges.getChangedItems().forEach(t=>{e.style.setProperty(t.name,t.value)}),this.styleChanges.getRemovedItems().forEach(t=>{e.style.removeProperty(t)}),this.attributeChanges.getChangedItems().forEach(t=>{e.setAttribute(t.name,t.value)}),this.attributeChanges.getRemovedItems().forEach(t=>{e.removeAttribute(t)})}isEmpty(){return this.addedClasses.size===0&&this.removedClasses.size===0&&this.styleChanges.isEmpty()&&this.attributeChanges.isEmpty()}}class Qi{constructor(e,t){this.changedElements=new WeakMap,this.changedElementsCount=0,this.addedElements=[],this.removedElements=[],this.isStarted=!1,this.element=e,this.shouldTrackChangeCallback=t,this.mutationObserver=new MutationObserver(this.onMutations.bind(this))}start(){this.isStarted||(this.mutationObserver.observe(this.element,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0}),this.isStarted=!0)}stop(){this.isStarted&&(this.mutationObserver.disconnect(),this.isStarted=!1)}getChangedElement(e){return this.changedElements.has(e)?this.changedElements.get(e):null}getAddedElements(){return this.addedElements}wasElementAdded(e){return this.addedElements.includes(e)}handlePendingChanges(){this.onMutations(this.mutationObserver.takeRecords())}onMutations(e){const t=new WeakMap;for(const s of e){const i=s.target;if(!this.shouldTrackChangeCallback(i)||this.isElementAddedByTranslation(i))continue;let n=!1;for(const o of this.addedElements)if(o.contains(i)){n=!0;break}if(!n)switch(s.type){case"childList":this.handleChildListMutation(s);break;case"attributes":t.has(i)||t.set(i,[]),t.get(i).includes(s.attributeName)||(this.handleAttributeMutation(s),t.set(i,[...t.get(i),s.attributeName]));break}}}handleChildListMutation(e){e.addedNodes.forEach(t=>{if(t instanceof Element){if(this.removedElements.includes(t)){this.removedElements.splice(this.removedElements.indexOf(t),1);return}this.isElementAddedByTranslation(t)||this.addedElements.push(t)}}),e.removedNodes.forEach(t=>{if(t instanceof Element){if(this.addedElements.includes(t)){this.addedElements.splice(this.addedElements.indexOf(t),1);return}this.removedElements.push(t)}})}handleAttributeMutation(e){const t=e.target;this.changedElements.has(t)||(this.changedElements.set(t,new Gi),this.changedElementsCount++);const s=this.changedElements.get(t);switch(e.attributeName){case"class":this.handleClassAttributeMutation(e,s);break;case"style":this.handleStyleAttributeMutation(e,s);break;default:this.handleGenericAttributeMutation(e,s)}s.isEmpty()&&(this.changedElements.delete(t),this.changedElementsCount--)}handleClassAttributeMutation(e,t){const s=e.target,n=(e.oldValue||"").match(/(\S+)/gu)||[],o=[].slice.call(s.classList),u=o.filter(d=>!n.includes(d)),h=n.filter(d=>!o.includes(d));u.forEach(d=>{t.addClass(d)}),h.forEach(d=>{t.removeClass(d)})}handleStyleAttributeMutation(e,t){const s=e.target,i=e.oldValue||"",n=this.extractStyles(i),o=s.getAttribute("style")||"",u=this.extractStyles(o),h=Object.keys(u).filter(b=>n[b]===void 0||n[b]!==u[b]),d=Object.keys(n).filter(b=>!u[b]);h.forEach(b=>{t.addStyle(b,u[b],n[b]===void 0?null:n[b])}),d.forEach(b=>{t.removeStyle(b,n[b])})}handleGenericAttributeMutation(e,t){const s=e.attributeName,i=e.target;let n=e.oldValue,o=i.getAttribute(s);if(n===s&&(n=""),o===s&&(o=""),!i.hasAttribute(s)){if(n===null)return;t.removeAttribute(s,e.oldValue);return}o!==n&&t.addAttribute(s,i.getAttribute(s),e.oldValue)}extractStyles(e){const t={};return e.split(";").forEach(s=>{const i=s.split(":");if(i.length===1)return;const n=i[0].trim();t[n]=i.slice(1).join(":").trim()}),t}isElementAddedByTranslation(e){return e.tagName==="FONT"&&e.getAttribute("style")==="vertical-align: inherit;"}}function Ie(r){const e=[];if(!r)return e;let t="",s="",i=[],n=[],o="action";const u=()=>{if(t)return t;if(e.length===0)throw new Error("Could not find any directives");return e[e.length-1].action},h=()=>{e.push({action:t,args:i,modifiers:n,getString:()=>r}),t="",s="",i=[],n=[],o="action"},d=()=>{i.push(s.trim()),s=""},b=()=>{if(i.length>1)throw new Error(`The modifier "${t}()" does not support multiple arguments.`);n.push({name:t,value:i.length>0?i[0]:null}),t="",i=[],o="action"};for(let L=0;L<r.length;L++){const w=r[L];switch(o){case"action":if(w==="("){o="arguments";break}if(w===" "){t&&h();break}if(w==="|"){b();break}t+=w;break;case"arguments":if(w===")"){d(),o="after_arguments";break}if(w===","){d();break}s+=w;break;case"after_arguments":if(w==="|"){b();break}if(w!==" ")throw new Error(`Missing space after ${u()}()`);h();break}}switch(o){case"action":case"after_arguments":t&&h();break;default:throw new Error(`Did you forget to add a closing ")" after "${t}"?`)}return e}function fs(r){const e=[];return r.forEach(t=>{e.push(...Yi(t).split(" "))}),e}function Yi(r){return r.replace(/[\s]+/g," ").trim()}function De(r){return r.replace(/\[]$/,"").split("[").map(e=>e.replace("]","")).join(".")}function Ut(r,e){if(r instanceof HTMLInputElement){if(r.type==="checkbox"){const t=Be(r,!1);if(t!==null){const s=e.get(t.action);if(Array.isArray(s))return ms(r,s);if(Object(s)===s)return ms(r,Object.values(s))}return r.hasAttribute("value")?r.checked?r.getAttribute("value"):null:r.checked}return Is(r)}return r instanceof HTMLSelectElement?r.multiple?Array.from(r.selectedOptions).map(t=>t.value):r.value:r.dataset.value?r.dataset.value:"value"in r?r.value:r.hasAttribute("value")?r.getAttribute("value"):null}function It(r,e){if(r instanceof HTMLInputElement){if(r.type==="file")return;if(r.type==="radio"){r.checked=r.value==e;return}if(r.type==="checkbox"){Array.isArray(e)?r.checked=e.some(t=>t==r.value):r.hasAttribute("value")?r.checked=r.value==e:r.checked=e;return}}if(r instanceof HTMLSelectElement){const t=[].concat(e).map(s=>`${s}`);Array.from(r.options).forEach(s=>{s.selected=t.includes(s.value)});return}e=e===void 0?"":e,r.value=e}function Fs(r){if(!r.dataset.model)return[];const e=Ie(r.dataset.model);return e.forEach(t=>{if(t.args.length>0)throw new Error(`The data-model="${r.dataset.model}" format is invalid: it does not support passing arguments to the model.`);t.action=De(t.action)}),e}function Be(r,e=!0){const t=Fs(r);if(t.length>0)return t[0];if(r.getAttribute("name")){const s=r.closest("form");if(s&&"model"in s.dataset){const n=Ie(s.dataset.model||"*")[0];if(n.args.length>0)throw new Error(`The data-model="${s.dataset.model}" format is invalid: it does not support passing arguments to the model.`);return n.action=De(r.getAttribute("name")),n}}if(!e)return null;throw new Error(`Cannot determine the model name for "${dt(r)}": the element must either have a "data-model" (or "name" attribute living inside a <form data-model="*">).`)}function ot(r,e){return e.element===r?!0:e.element.contains(r)?r.closest('[data-controller~="live"]')===e.element:!1}function Ot(r){const e=r.cloneNode(!0);if(!(e instanceof HTMLElement))throw new Error("Could not clone element");return e}function Zi(r){const e=document.createElement("template");if(r=r.trim(),e.innerHTML=r,e.content.childElementCount>1)throw new Error(`Component HTML contains ${e.content.childElementCount} elements, but only 1 root element is allowed.`);const t=e.content.firstElementChild;if(!t)throw new Error("Child not found");if(!(t instanceof HTMLElement))throw new Error(`Created element is not an HTMLElement: ${r.trim()}`);return t}const ms=(r,e)=>{const t=[...e],s=Is(r),i=e.indexOf(s);return r.checked?(i===-1&&t.push(s),t):(i>-1&&t.splice(i,1),t)},Is=r=>r.dataset.value?r.dataset.value:r.value;var ps=function(){let r=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:w,afterNodeAdded:w,beforeNodeMorphed:w,afterNodeMorphed:w,beforeNodeRemoved:w,afterNodeRemoved:w,beforeAttributeUpdated:w},head:{style:"merge",shouldPreserve:function(a){return a.getAttribute("im-preserve")==="true"},shouldReAppend:function(a){return a.getAttribute("im-re-append")==="true"},shouldRemove:w,afterHeadMorphed:w}};function t(a,l,c={}){a instanceof Document&&(a=a.documentElement),typeof l=="string"&&(l=f(l));let E=m(l),A=I(a,E,c);return s(a,E,A)}function s(a,l,c){if(c.head.block){let E=a.querySelector("head"),A=l.querySelector("head");if(E&&A){let M=L(A,E,c);Promise.all(M).then(function(){s(a,l,Object.assign(c,{head:{block:!1,ignore:!0}}))});return}}if(c.morphStyle==="innerHTML")return o(l,a,c),a.children;if(c.morphStyle==="outerHTML"||c.morphStyle==null){let E=y(l,a,c),A=E==null?void 0:E.previousSibling,M=E==null?void 0:E.nextSibling,B=n(a,E,c);return E?T(A,B,M):[]}else throw"Do not understand how to morph style "+c.morphStyle}function i(a,l){return l.ignoreActiveValue&&a===document.activeElement}function n(a,l,c){if(!(c.ignoreActive&&a===document.activeElement))return l==null?c.callbacks.beforeNodeRemoved(a)===!1?a:(a.remove(),c.callbacks.afterNodeRemoved(a),null):O(a,l)?(c.callbacks.beforeNodeMorphed(a,l)===!1||(a instanceof HTMLHeadElement&&c.head.ignore||(a instanceof HTMLHeadElement&&c.head.style!=="morph"?L(l,a,c):(h(l,a,c),i(a,c)||o(l,a,c))),c.callbacks.afterNodeMorphed(a,l)),a):c.callbacks.beforeNodeRemoved(a)===!1||c.callbacks.beforeNodeAdded(l)===!1?a:(a.parentElement.replaceChild(l,a),c.callbacks.afterNodeAdded(l),c.callbacks.afterNodeRemoved(a),l)}function o(a,l,c){let E=a.firstChild,A=l.firstChild,M;for(;E;){if(M=E,E=M.nextSibling,A==null){if(c.callbacks.beforeNodeAdded(M)===!1)return;l.appendChild(M),c.callbacks.afterNodeAdded(M),K(c,M);continue}if(P(M,A,c)){n(A,M,c),A=A.nextSibling,K(c,M);continue}let B=g(a,l,M,A,c);if(B){A=C(A,B,c),n(B,M,c),K(c,M);continue}let j=v(a,l,M,A,c);if(j){A=C(A,j,c),n(j,M,c),K(c,M);continue}if(c.callbacks.beforeNodeAdded(M)===!1)return;l.insertBefore(M,A),c.callbacks.afterNodeAdded(M),K(c,M)}for(;A!==null;){let B=A;A=A.nextSibling,D(B,c)}}function u(a,l,c,E){return a==="value"&&E.ignoreActiveValue&&l===document.activeElement?!0:E.callbacks.beforeAttributeUpdated(a,l,c)===!1}function h(a,l,c){let E=a.nodeType;if(E===1){const A=a.attributes,M=l.attributes;for(const B of A)u(B.name,l,"update",c)||l.getAttribute(B.name)!==B.value&&l.setAttribute(B.name,B.value);for(let B=M.length-1;0<=B;B--){const j=M[B];u(j.name,l,"remove",c)||a.hasAttribute(j.name)||l.removeAttribute(j.name)}}(E===8||E===3)&&l.nodeValue!==a.nodeValue&&(l.nodeValue=a.nodeValue),i(l,c)||b(a,l,c)}function d(a,l,c,E){if(a[c]!==l[c]){let A=u(c,l,"update",E);A||(l[c]=a[c]),a[c]?A||l.setAttribute(c,a[c]):u(c,l,"remove",E)||l.removeAttribute(c)}}function b(a,l,c){if(a instanceof HTMLInputElement&&l instanceof HTMLInputElement&&a.type!=="file"){let E=a.value,A=l.value;d(a,l,"checked",c),d(a,l,"disabled",c),a.hasAttribute("value")?E!==A&&(u("value",l,"update",c)||(l.setAttribute("value",E),l.value=E)):u("value",l,"remove",c)||(l.value="",l.removeAttribute("value"))}else if(a instanceof HTMLOptionElement)d(a,l,"selected",c);else if(a instanceof HTMLTextAreaElement&&l instanceof HTMLTextAreaElement){let E=a.value,A=l.value;if(u("value",l,"update",c))return;E!==A&&(l.value=E),l.firstChild&&l.firstChild.nodeValue!==E&&(l.firstChild.nodeValue=E)}}function L(a,l,c){let E=[],A=[],M=[],B=[],j=c.head.style,ue=new Map;for(const W of a.children)ue.set(W.outerHTML,W);for(const W of l.children){let ee=ue.has(W.outerHTML),Ve=c.head.shouldReAppend(W),Lt=c.head.shouldPreserve(W);ee||Lt?Ve?A.push(W):(ue.delete(W.outerHTML),M.push(W)):j==="append"?Ve&&(A.push(W),B.push(W)):c.head.shouldRemove(W)!==!1&&A.push(W)}B.push(...ue.values());let ts=[];for(const W of B){let ee=document.createRange().createContextualFragment(W.outerHTML).firstChild;if(c.callbacks.beforeNodeAdded(ee)!==!1){if(ee.href||ee.src){let Ve=null,Lt=new Promise(function(kr){Ve=kr});ee.addEventListener("load",function(){Ve()}),ts.push(Lt)}l.appendChild(ee),c.callbacks.afterNodeAdded(ee),E.push(ee)}}for(const W of A)c.callbacks.beforeNodeRemoved(W)!==!1&&(l.removeChild(W),c.callbacks.afterNodeRemoved(W));return c.head.afterHeadMorphed(l,{added:E,kept:M,removed:A}),ts}function w(){}function q(a){let l={};return Object.assign(l,e),Object.assign(l,a),l.callbacks={},Object.assign(l.callbacks,e.callbacks),Object.assign(l.callbacks,a.callbacks),l.head={},Object.assign(l.head,e.head),Object.assign(l.head,a.head),l}function I(a,l,c){return c=q(c),{target:a,newContent:l,config:c,morphStyle:c.morphStyle,ignoreActive:c.ignoreActive,ignoreActiveValue:c.ignoreActiveValue,idMap:Lr(a,l),deadIds:new Set,callbacks:c.callbacks,head:c.head}}function P(a,l,c){return a==null||l==null?!1:a.nodeType===l.nodeType&&a.tagName===l.tagName?a.id!==""&&a.id===l.id?!0:ne(c,a,l)>0:!1}function O(a,l){return a==null||l==null?!1:a.nodeType===l.nodeType&&a.tagName===l.tagName}function C(a,l,c){for(;a!==l;){let E=a;a=a.nextSibling,D(E,c)}return K(c,l),l.nextSibling}function g(a,l,c,E,A){let M=ne(A,c,l),B=null;if(M>0){let j=E,ue=0;for(;j!=null;){if(P(c,j,A))return j;if(ue+=ne(A,j,a),ue>M)return null;j=j.nextSibling}}return B}function v(a,l,c,E,A){let M=E,B=c.nextSibling,j=0;for(;M!=null;){if(ne(A,M,a)>0)return null;if(O(c,M))return M;if(O(B,M)&&(j++,B=B.nextSibling,j>=2))return null;M=M.nextSibling}return M}function f(a){let l=new DOMParser,c=a.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(c.match(/<\/html>/)||c.match(/<\/head>/)||c.match(/<\/body>/)){let E=l.parseFromString(a,"text/html");if(c.match(/<\/html>/))return E.generatedByIdiomorph=!0,E;{let A=E.firstChild;return A?(A.generatedByIdiomorph=!0,A):null}}else{let A=l.parseFromString("<body><template>"+a+"</template></body>","text/html").body.querySelector("template").content;return A.generatedByIdiomorph=!0,A}}function m(a){if(a==null)return document.createElement("div");if(a.generatedByIdiomorph)return a;if(a instanceof Node){const l=document.createElement("div");return l.append(a),l}else{const l=document.createElement("div");for(const c of[...a])l.append(c);return l}}function T(a,l,c){let E=[],A=[];for(;a!=null;)E.push(a),a=a.previousSibling;for(;E.length>0;){let M=E.pop();A.push(M),l.parentElement.insertBefore(M,l)}for(A.push(l);c!=null;)E.push(c),A.push(c),c=c.nextSibling;for(;E.length>0;)l.parentElement.insertBefore(E.pop(),l.nextSibling);return A}function y(a,l,c){let E;E=a.firstChild;let A=E,M=0;for(;E;){let B=S(E,l,c);B>M&&(A=E,M=B),E=E.nextSibling}return A}function S(a,l,c){return O(a,l)?.5+ne(c,a,l):0}function D(a,l){K(l,a),l.callbacks.beforeNodeRemoved(a)!==!1&&(a.remove(),l.callbacks.afterNodeRemoved(a))}function $(a,l){return!a.deadIds.has(l)}function V(a,l,c){return(a.idMap.get(c)||r).has(l)}function K(a,l){let c=a.idMap.get(l)||r;for(const E of c)a.deadIds.add(E)}function ne(a,l,c){let E=a.idMap.get(l)||r,A=0;for(const M of E)$(a,M)&&V(a,M,c)&&++A;return A}function J(a,l){let c=a.parentElement,E=a.querySelectorAll("[id]");for(const A of E){let M=A;for(;M!==c&&M!=null;){let B=l.get(M);B==null&&(B=new Set,l.set(M,B)),B.add(A.id),M=M.parentElement}}}function Lr(a,l){let c=new Map;return J(a,c),J(l,c),c}return{morph:t,defaults:e}}();function Dt(r){r instanceof HTMLInputElement&&r.type==="file"||("value"in r?r.setAttribute("value",r.value):r.hasAttribute("value")&&r.setAttribute("value","")),Array.from(r.children).forEach(t=>{Dt(t)})}const en=(r,e)=>{for(let t=0;t<r.attributes.length;t++){const s=r.attributes[t];e.setAttribute(s.name,s.value)}};function tn(r,e,t,s,i){const n=[],o=new Map,u=(h,d)=>{const b=o.get(h);if(!(b instanceof HTMLElement))throw new Error(`Original element with id ${h} not found`);if(n.push(h),!d)return null;const L=Ot(b);return b.replaceWith(L),L};e.querySelectorAll("[data-live-preserve]").forEach(h=>{const d=h.id;if(!d)throw new Error("The data-live-preserve attribute requires an id attribute to be set on the element");const b=r.querySelector(`#${d}`);if(!(b instanceof HTMLElement))throw new Error(`The element with id "${d}" was not found in the original HTML`);h.removeAttribute("data-live-preserve"),o.set(d,b),en(h,b)}),ps.morph(r,e,{callbacks:{beforeNodeMorphed:(h,d)=>{var b;if(!(h instanceof Element)||!(d instanceof Element)||h===r)return!0;if(h.id&&o.has(h.id)){if(h.id===d.id)return!1;const L=u(h.id,!0);if(!L)throw new Error("missing clone");return ps.morph(L,d),!1}if(h instanceof HTMLElement&&d instanceof HTMLElement){if(typeof h.__x<"u"){if(!window.Alpine)throw new Error("Unable to access Alpine.js though the global window.Alpine variable. Please make sure Alpine.js is loaded before Symfony UX LiveComponent.");if(typeof window.Alpine.morph!="function")throw new Error("Unable to access Alpine.js morph function. Please make sure the Alpine.js Morph plugin is installed and loaded, see https://alpinejs.dev/plugins/morph for more information.");window.Alpine.morph(h.__x,d)}if(i.wasElementAdded(h))return h.insertAdjacentElement("afterend",d),!1;t.includes(h)&&It(d,s(h)),h===document.activeElement&&h!==document.body&&Be(h,!1)!==null&&It(d,s(h));const L=i.getChangedElement(h);if(L&&L.applyToElement(d),h.nodeName.toUpperCase()!=="OPTION"&&h.isEqualNode(d)){const w=Ot(h);Dt(w);const q=Ot(d);if(Dt(q),w.isEqualNode(q))return!1}}return h.hasAttribute("data-skip-morph")||h.id&&h.id!==d.id?(h.innerHTML=d.innerHTML,!0):(b=h.parentElement)!=null&&b.hasAttribute("data-skip-morph")?!1:!h.hasAttribute("data-live-ignore")},beforeNodeRemoved(h){return h instanceof HTMLElement?h.id&&o.has(h.id)?(u(h.id,!1),!0):i.wasElementAdded(h)?!1:!h.hasAttribute("data-live-ignore"):!0}}}),n.forEach(h=>{const d=r.querySelector(`#${h}`),b=o.get(h);if(!(d instanceof HTMLElement)||!(b instanceof HTMLElement))throw new Error("Missing elements.");d.replaceWith(b)})}class sn{constructor(e,t){this.elementEventListeners=[{event:"input",callback:s=>this.handleInputEvent(s)}],this.component=e,this.modelElementResolver=t,this.unsyncedInputs=new rn}activate(){this.elementEventListeners.forEach(({event:e,callback:t})=>{this.component.element.addEventListener(e,t)})}deactivate(){this.elementEventListeners.forEach(({event:e,callback:t})=>{this.component.element.removeEventListener(e,t)})}markModelAsSynced(e){this.unsyncedInputs.markModelAsSynced(e)}handleInputEvent(e){const t=e.target;t&&this.updateModelFromElement(t)}updateModelFromElement(e){if(!ot(e,this.component))return;if(!(e instanceof HTMLElement))throw new Error("Could not update model for non HTMLElement");const t=this.modelElementResolver.getModelName(e);this.unsyncedInputs.add(e,t)}getUnsyncedInputs(){return this.unsyncedInputs.allUnsyncedInputs()}getUnsyncedModels(){return Array.from(this.unsyncedInputs.getUnsyncedModelNames())}resetUnsyncedFields(){this.unsyncedInputs.resetUnsyncedFields()}}class rn{constructor(){this.unsyncedNonModelFields=[],this.unsyncedModelNames=[],this.unsyncedModelFields=new Map}add(e,t=null){if(t){this.unsyncedModelFields.set(t,e),this.unsyncedModelNames.includes(t)||this.unsyncedModelNames.push(t);return}this.unsyncedNonModelFields.push(e)}resetUnsyncedFields(){this.unsyncedModelFields.forEach((e,t)=>{this.unsyncedModelNames.includes(t)||this.unsyncedModelFields.delete(t)})}allUnsyncedInputs(){return[...this.unsyncedNonModelFields,...this.unsyncedModelFields.values()]}markModelAsSynced(e){const t=this.unsyncedModelNames.indexOf(e);t!==-1&&this.unsyncedModelNames.splice(t,1)}getUnsyncedModelNames(){return this.unsyncedModelNames}}function nn(r,e){const{currentLevelData:t,finalKey:s}=on(r,e);if(t!==void 0)return t[s]}const on=(r,e)=>{const t=JSON.parse(JSON.stringify(r));let s=t;const i=e.split(".");for(let o=0;o<i.length-1;o++)s=s[i[o]];const n=i[i.length-1];return{currentLevelData:s,finalData:t,finalKey:n,parts:i}};class an{constructor(e){this.props={},this.dirtyProps={},this.pendingProps={},this.updatedPropsFromParent={},this.props=e}get(e){const t=De(e);return this.dirtyProps[t]!==void 0?this.dirtyProps[t]:this.pendingProps[t]!==void 0?this.pendingProps[t]:this.props[t]!==void 0?this.props[t]:nn(this.props,t)}has(e){return this.get(e)!==void 0}set(e,t){const s=De(e);return this.get(s)===t?!1:(this.dirtyProps[s]=t,!0)}getOriginalProps(){return{...this.props}}getDirtyProps(){return{...this.dirtyProps}}getUpdatedPropsFromParent(){return{...this.updatedPropsFromParent}}flushDirtyPropsToPending(){this.pendingProps={...this.dirtyProps},this.dirtyProps={}}reinitializeAllProps(e){this.props=e,this.updatedPropsFromParent={},this.pendingProps={}}pushPendingPropsBackToDirty(){this.dirtyProps={...this.pendingProps,...this.dirtyProps},this.pendingProps={}}storeNewPropsFromParent(e){let t=!1;for(const[s,i]of Object.entries(e))this.get(s)!==i&&(t=!0);return t&&(this.updatedPropsFromParent=e),t}}class ln{constructor(e,t,s,i,n,o,u){this.fingerprint="",this.defaultDebounce=150,this.backendRequest=null,this.pendingActions=[],this.pendingFiles={},this.isRequestPending=!1,this.requestDebounceTimeout=null,this.element=e,this.name=t,this.backend=o,this.elementDriver=u,this.id=n,this.listeners=new Map,i.forEach(h=>{var d;this.listeners.has(h.event)||this.listeners.set(h.event,[]),(d=this.listeners.get(h.event))==null||d.push(h.action)}),this.valueStore=new an(s),this.unsyncedInputsTracker=new sn(this,u),this.hooks=new Xi,this.resetPromise(),this.externalMutationTracker=new Qi(this.element,h=>ot(h,this)),this.externalMutationTracker.start()}addPlugin(e){e.attachToComponent(this)}connect(){Wi(this),this.hooks.triggerHook("connect",this),this.unsyncedInputsTracker.activate(),this.externalMutationTracker.start()}disconnect(){_i(this),this.hooks.triggerHook("disconnect",this),this.clearRequestDebounceTimeout(),this.unsyncedInputsTracker.deactivate(),this.externalMutationTracker.stop()}on(e,t){this.hooks.register(e,t)}off(e,t){this.hooks.unregister(e,t)}set(e,t,s=!1,i=!1){const n=this.nextRequestPromise,o=De(e);if(!this.valueStore.has(o))throw new Error(`Invalid model name "${e}".`);const u=this.valueStore.set(o,t);return this.hooks.triggerHook("model:set",e,t,this),this.unsyncedInputsTracker.markModelAsSynced(o),s&&u&&this.debouncedStartRequest(i),n}getData(e){const t=De(e);if(!this.valueStore.has(t))throw new Error(`Invalid model "${e}".`);return this.valueStore.get(t)}action(e,t={},s=!1){const i=this.nextRequestPromise;return this.pendingActions.push({name:e,args:t}),this.debouncedStartRequest(s),i}files(e,t){this.pendingFiles[e]=t}render(){const e=this.nextRequestPromise;return this.tryStartingRequest(),e}getUnsyncedModels(){return this.unsyncedInputsTracker.getUnsyncedModels()}emit(e,t,s=null){this.performEmit(e,t,!1,s)}emitUp(e,t,s=null){this.performEmit(e,t,!0,s)}emitSelf(e,t){this.doEmit(e,t)}performEmit(e,t,s,i){zi(this,s,i).forEach(o=>{o.doEmit(e,t)})}doEmit(e,t){if(!this.listeners.has(e))return;(this.listeners.get(e)||[]).forEach(i=>{this.action(i,t,1)})}isTurboEnabled(){return typeof Turbo<"u"&&!this.element.closest('[data-turbo="false"]')}tryStartingRequest(){if(!this.backendRequest){this.performRequest();return}this.isRequestPending=!0}performRequest(){const e=this.nextRequestPromiseResolve;this.resetPromise(),this.unsyncedInputsTracker.resetUnsyncedFields();const t={};for(const[i,n]of Object.entries(this.pendingFiles))n.files&&(t[i]=n.files);const s={props:this.valueStore.getOriginalProps(),actions:this.pendingActions,updated:this.valueStore.getDirtyProps(),children:{},updatedPropsFromParent:this.valueStore.getUpdatedPropsFromParent(),files:t};this.hooks.triggerHook("request:started",s),this.backendRequest=this.backend.makeRequest(s.props,s.actions,s.updated,s.children,s.updatedPropsFromParent,s.files),this.hooks.triggerHook("loading.state:started",this.element,this.backendRequest),this.pendingActions=[],this.valueStore.flushDirtyPropsToPending(),this.isRequestPending=!1,this.backendRequest.promise.then(async i=>{var h;const n=new ji(i),o=await n.getBody();for(const d of Object.values(this.pendingFiles))d.value="";const u=n.response.headers;if(!((h=u.get("Content-Type"))!=null&&h.includes("application/vnd.live-component+html"))&&!u.get("X-Live-Redirect")){const d={displayError:!0};return this.valueStore.pushPendingPropsBackToDirty(),this.hooks.triggerHook("response:error",n,d),d.displayError&&this.renderError(o),this.backendRequest=null,e(n),i}return this.processRerender(o,n),this.backendRequest=null,e(n),this.isRequestPending&&(this.isRequestPending=!1,this.performRequest()),i})}processRerender(e,t){const s={shouldRender:!0};if(this.hooks.triggerHook("render:started",e,t,s),!s.shouldRender)return;if(t.response.headers.get("Location")){this.isTurboEnabled()?Turbo.visit(t.response.headers.get("Location")):window.location.href=t.response.headers.get("Location")||"";return}this.hooks.triggerHook("loading.state:finished",this.element);const i={};Object.keys(this.valueStore.getDirtyProps()).forEach(d=>{i[d]=this.valueStore.get(d)});let n;try{if(n=Zi(e),!n.matches("[data-controller~=live]"))throw new Error("A live component template must contain a single root controller element.")}catch(d){throw console.error(`There was a problem with the '${this.name}' component HTML returned:`,{id:this.id}),d}this.externalMutationTracker.handlePendingChanges(),this.externalMutationTracker.stop(),tn(this.element,n,this.unsyncedInputsTracker.getUnsyncedInputs(),d=>Ut(d,this.valueStore),this.externalMutationTracker),this.externalMutationTracker.start();const o=this.elementDriver.getComponentProps();this.valueStore.reinitializeAllProps(o);const u=this.elementDriver.getEventsToEmit(),h=this.elementDriver.getBrowserEventsToDispatch();Object.keys(i).forEach(d=>{this.valueStore.set(d,i[d])}),u.forEach(({event:d,data:b,target:L,componentName:w})=>{if(L==="up"){this.emitUp(d,b,w);return}if(L==="self"){this.emitSelf(d,b);return}this.emit(d,b,w)}),h.forEach(({event:d,payload:b})=>{this.element.dispatchEvent(new CustomEvent(d,{detail:b,bubbles:!0}))}),this.hooks.triggerHook("render:finished",this)}calculateDebounce(e){return e===!0?this.defaultDebounce:e===!1?0:e}clearRequestDebounceTimeout(){this.requestDebounceTimeout&&(clearTimeout(this.requestDebounceTimeout),this.requestDebounceTimeout=null)}debouncedStartRequest(e){this.clearRequestDebounceTimeout(),this.requestDebounceTimeout=window.setTimeout(()=>{this.render()},this.calculateDebounce(e))}renderError(e){let t=document.getElementById("live-component-error");t?t.innerHTML="":(t=document.createElement("div"),t.id="live-component-error",t.style.padding="50px",t.style.backgroundColor="rgba(0, 0, 0, .5)",t.style.zIndex="100000",t.style.position="fixed",t.style.top="0px",t.style.bottom="0px",t.style.left="0px",t.style.right="0px",t.style.display="flex",t.style.flexDirection="column");const s=document.createElement("iframe");s.style.borderRadius="5px",s.style.flexGrow="1",t.appendChild(s),document.body.prepend(t),document.body.style.overflow="hidden",s.contentWindow&&(s.contentWindow.document.open(),s.contentWindow.document.write(e),s.contentWindow.document.close());const i=n=>{n&&(n.outerHTML=""),document.body.style.overflow="visible"};t.addEventListener("click",()=>i(t)),t.setAttribute("tabindex","0"),t.addEventListener("keydown",n=>{n.key==="Escape"&&i(t)}),t.focus()}resetPromise(){this.nextRequestPromise=new Promise(e=>{this.nextRequestPromiseResolve=e})}_updateFromParentProps(e){this.valueStore.storeNewPropsFromParent(e)&&this.render()}}function cn(r){return new Proxy(r,{get(e,t){if(t in e||typeof t!="string"){if(typeof e[t]=="function"){const s=e[t];return(...i)=>s.apply(e,i)}return Reflect.get(e,t)}return e.valueStore.has(t)?e.getData(t):s=>e.action.apply(e,[t,s])},set(e,t,s){return t in e?(e[t]=s,!0):(e.set(t,s),!0)}})}class hn{constructor(e){this.controller=e}getModelName(e){const t=Be(e,!1);return t?t.action:null}getComponentProps(){return this.controller.propsValue}getEventsToEmit(){return this.controller.eventsToEmitValue}getBrowserEventsToDispatch(){return this.controller.eventsToDispatchValue}}function Ds(r){let e=!0,t=null,s=!1;r.modifiers.forEach(o=>{switch(o.name){case"on":if(!o.value)throw new Error(`The "on" modifier in ${r.getString()} requires a value - e.g. on(change).`);if(!["input","change"].includes(o.value))throw new Error(`The "on" modifier in ${r.getString()} only accepts the arguments "input" or "change".`);t=o.value;break;case"norender":e=!1;break;case"debounce":s=o.value?Number.parseInt(o.value):!0;break;default:throw new Error(`Unknown modifier "${o.name}" in data-model="${r.getString()}".`)}});const[i,n]=r.action.split(":");return{modelName:i,innerModelName:n||null,shouldRender:e,debounce:s,targetEventName:t}}class un{constructor(e){this.parentModelBindings=[],this.component=e;const t=Fs(this.component.element);this.parentModelBindings=t.map(Ds)}attachToComponent(e){e.on("request:started",t=>{t.children=this.getChildrenFingerprints()}),e.on("model:set",(t,s)=>{this.notifyParentModelChange(t,s)})}getChildrenFingerprints(){const e={};return this.getChildren().forEach(t=>{if(!t.id)throw new Error("missing id");e[t.id]={fingerprint:t.fingerprint,tag:t.element.tagName.toLowerCase()}}),e}notifyParentModelChange(e,t){const s=Ji(this.component);s&&this.parentModelBindings.forEach(i=>{(i.innerModelName||"value")===e&&s.set(i.modelName,t,i.shouldRender,i.debounce)})}getChildren(){return Ki(this.component)}}class dn{constructor(){this.intersectionObserver=null}attachToComponent(e){var t;((t=e.element.attributes.getNamedItem("loading"))==null?void 0:t.value)==="lazy"&&(e.on("connect",()=>{this.getObserver().observe(e.element)}),e.on("disconnect",()=>{var s;(s=this.intersectionObserver)==null||s.unobserve(e.element)}))}getObserver(){return this.intersectionObserver||(this.intersectionObserver=new IntersectionObserver((e,t)=>{e.forEach(s=>{s.isIntersecting&&(s.target.dispatchEvent(new CustomEvent("live:appear")),t.unobserve(s.target))})})),this.intersectionObserver}}class fn{attachToComponent(e){e.on("loading.state:started",(t,s)=>{this.startLoading(e,t,s)}),e.on("loading.state:finished",t=>{this.finishLoading(e,t)}),this.finishLoading(e,e.element)}startLoading(e,t,s){this.handleLoadingToggle(e,!0,t,s)}finishLoading(e,t){this.handleLoadingToggle(e,!1,t,null)}handleLoadingToggle(e,t,s,i){t?this.addAttributes(s,["busy"]):this.removeAttributes(s,["busy"]),this.getLoadingDirectives(e,s).forEach(({element:n,directives:o})=>{t?this.addAttributes(n,["data-live-is-loading"]):this.removeAttributes(n,["data-live-is-loading"]),o.forEach(u=>{this.handleLoadingDirective(n,t,u,i)})})}handleLoadingDirective(e,t,s,i){const n=mn(s.action,t),o=[],u=[];let h=0;const d=new Map;if(d.set("delay",L=>{t&&(h=L.value?Number.parseInt(L.value):200)}),d.set("action",L=>{if(!L.value)throw new Error(`The "action" in data-loading must have an action name - e.g. action(foo). It's missing for "${s.getString()}"`);o.push(L.value)}),d.set("model",L=>{if(!L.value)throw new Error(`The "model" in data-loading must have an action name - e.g. model(foo). It's missing for "${s.getString()}"`);u.push(L.value)}),s.modifiers.forEach(L=>{if(d.has(L.name)){(d.get(L.name)??(()=>{}))(L);return}throw new Error(`Unknown modifier "${L.name}" used in data-loading="${s.getString()}". Available modifiers are: ${Array.from(d.keys()).join(", ")}.`)}),t&&o.length>0&&i&&!i.containsOneOfActions(o)||t&&u.length>0&&i&&!i.areAnyModelsUpdated(u))return;let b;switch(n){case"show":b=()=>this.showElement(e);break;case"hide":b=()=>this.hideElement(e);break;case"addClass":b=()=>this.addClass(e,s.args);break;case"removeClass":b=()=>this.removeClass(e,s.args);break;case"addAttribute":b=()=>this.addAttributes(e,s.args);break;case"removeAttribute":b=()=>this.removeAttributes(e,s.args);break;default:throw new Error(`Unknown data-loading action "${n}"`)}if(h){window.setTimeout(()=>{i&&!i.isResolved&&b()},h);return}b()}getLoadingDirectives(e,t){const s=[];let i=[...Array.from(t.querySelectorAll("[data-loading]"))];return i=i.filter(n=>ot(n,e)),t.hasAttribute("data-loading")&&(i=[t,...i]),i.forEach(n=>{if(!(n instanceof HTMLElement)&&!(n instanceof SVGElement))throw new Error("Invalid Element Type");const o=Ie(n.dataset.loading||"show");s.push({element:n,directives:o})}),s}showElement(e){e.style.display="revert"}hideElement(e){e.style.display="none"}addClass(e,t){e.classList.add(...fs(t))}removeClass(e,t){e.classList.remove(...fs(t)),e.classList.length===0&&e.removeAttribute("class")}addAttributes(e,t){t.forEach(s=>{e.setAttribute(s,"")})}removeAttributes(e,t){t.forEach(s=>{e.removeAttribute(s)})}}const mn=(r,e)=>{switch(r){case"show":return e?"show":"hide";case"hide":return e?"hide":"show";case"addClass":return e?"addClass":"removeClass";case"removeClass":return e?"removeClass":"addClass";case"addAttribute":return e?"addAttribute":"removeAttribute";case"removeAttribute":return e?"removeAttribute":"addAttribute"}throw new Error(`Unknown data-loading action "${r}"`)};class pn{constructor(){this.isConnected=!1}attachToComponent(e){e.on("render:started",(t,s,i)=>{this.isConnected||(i.shouldRender=!1)}),e.on("connect",()=>{this.isConnected=!0}),e.on("disconnect",()=>{this.isConnected=!1})}}class gn{constructor(e){this.isPollingActive=!0,this.pollingIntervals=[],this.component=e}addPoll(e,t){this.polls.push({actionName:e,duration:t}),this.isPollingActive&&this.initiatePoll(e,t)}startAllPolling(){this.isPollingActive||(this.isPollingActive=!0,this.polls.forEach(({actionName:e,duration:t})=>{this.initiatePoll(e,t)}))}stopAllPolling(){this.isPollingActive=!1,this.pollingIntervals.forEach(e=>{clearInterval(e)})}clearPolling(){this.stopAllPolling(),this.polls=[],this.startAllPolling()}initiatePoll(e,t){let s;e==="$render"?s=()=>{this.component.render()}:s=()=>{this.component.action(e,{},0)};const i=window.setInterval(()=>{s()},t);this.pollingIntervals.push(i)}}class bn{attachToComponent(e){this.element=e.element,this.pollingDirector=new gn(e),this.initializePolling(),e.on("connect",()=>{this.pollingDirector.startAllPolling()}),e.on("disconnect",()=>{this.pollingDirector.stopAllPolling()}),e.on("render:finished",()=>{this.initializePolling()})}addPoll(e,t){this.pollingDirector.addPoll(e,t)}clearPolling(){this.pollingDirector.clearPolling()}initializePolling(){if(this.clearPolling(),this.element.dataset.poll===void 0)return;const e=this.element.dataset.poll;Ie(e||"$render").forEach(s=>{let i=2e3;s.modifiers.forEach(n=>{switch(n.name){case"delay":n.value&&(i=Number.parseInt(n.value));break;default:console.warn(`Unknown modifier "${n.name}" in data-poll "${e}".`)}}),this.addPoll(s.action,i)})}}function Bs(r){if(r===null||r===""||r===void 0||Array.isArray(r)&&r.length===0)return!0;if(typeof r!="object")return!1;for(const e of Object.keys(r))if(!Bs(r[e]))return!1;return!0}function vn(r){const e=(s,i={},n="")=>(Object.entries(s).forEach(([o,u])=>{const h=n===""?o:`${n}[${o}]`;n===""&&Bs(u)?i[h]="":u!==null&&(typeof u=="object"?i={...i,...e(u,i,h)}:i[h]=encodeURIComponent(u).replace(/%20/g,"+").replace(/%2C/g,","))}),i),t=e(r);return Object.entries(t).map(([s,i])=>`${s}=${i}`).join("&")}function yn(r){if(r=r.replace("?",""),r==="")return{};const e=(i,n,o)=>{const[u,h,...d]=i.split(".");if(!h)return o[i]=n,n;o[u]===void 0&&(o[u]=Number.isNaN(Number.parseInt(h))?{}:[]),e([h,...d].join("."),n,o[u])},t=r.split("&").map(i=>i.split("=")),s={};return t.forEach(([i,n])=>{if(n=decodeURIComponent(n.replace(/\+/g,"%20")),!i.includes("["))s[i]=n;else{if(n==="")return;const o=i.replace(/\[/g,".").replace(/]/g,"");e(o,n,s)}}),s}class En extends URL{has(e){const t=this.getData();return Object.keys(t).includes(e)}set(e,t){const s=this.getData();s[e]=t,this.setData(s)}get(e){return this.getData()[e]}remove(e){const t=this.getData();delete t[e],this.setData(t)}getData(){return this.search?yn(this.search):{}}setData(e){this.search=vn(e)}}class wn{static replace(e){history.replaceState(history.state,"",e)}}class Sn{constructor(e){this.mapping=e}attachToComponent(e){e.on("render:finished",t=>{const s=new En(window.location.href),i=s.toString();Object.entries(this.mapping).forEach(([n,o])=>{const u=t.valueStore.get(n);s.set(o.name,u)}),i!==s.toString()&&wn.replace(s)})}}class An{attachToComponent(e){this.synchronizeValueOfModelFields(e),e.on("render:finished",()=>{this.synchronizeValueOfModelFields(e)})}synchronizeValueOfModelFields(e){e.element.querySelectorAll("[data-model]").forEach(t=>{if(!(t instanceof HTMLElement))throw new Error("Invalid element using data-model.");if(t instanceof HTMLFormElement||!ot(t,e))return;const s=Be(t);if(!s)return;const i=s.action;e.getUnsyncedModels().includes(i)||(e.valueStore.has(i)&&It(t,e.valueStore.get(i)),t instanceof HTMLSelectElement&&!t.multiple&&e.valueStore.set(i,Ut(t,e.valueStore)))})}}class Tn{attachToComponent(e){e.on("model:set",t=>{this.handleModelSet(t,e.valueStore)})}handleModelSet(e,t){if(t.has("validatedFields")){const s=[...t.get("validatedFields")];s.includes(e)||s.push(e),t.set("validatedFields",s)}}}class at extends ye{constructor(){super(...arguments),this.pendingActionTriggerModelElement=null,this.elementEventListeners=[{event:"input",callback:e=>this.handleInputEvent(e)},{event:"change",callback:e=>this.handleChangeEvent(e)}],this.pendingFiles={}}initialize(){this.mutationObserver=new MutationObserver(this.onMutations.bind(this)),this.createComponent()}connect(){this.connectComponent(),this.mutationObserver.observe(this.element,{attributes:!0})}disconnect(){this.disconnectComponent(),this.mutationObserver.disconnect()}update(e){if(e.type==="input"||e.type==="change")throw new Error(`Since LiveComponents 2.3, you no longer need data-action="live#update" on form elements. Found on element: ${dt(e.currentTarget)}`);this.updateModelFromElementEvent(e.currentTarget,null)}action(e){const t=e.params;if(!t.action)throw new Error(`No action name provided on element: ${dt(e.currentTarget)}. Did you forget to add the "data-live-action-param" attribute?`);const s=t.action,i={...t};delete i.action;const n=Ie(s);let o=!1;n.forEach(u=>{let h={};const d=new Map;d.set("stop",()=>{e.stopPropagation()}),d.set("self",()=>{e.target,e.currentTarget}),d.set("debounce",b=>{o=b.value?Number.parseInt(b.value):!0}),d.set("files",b=>{b.value?this.pendingFiles[b.value]&&(h[b.value]=this.pendingFiles[b.value]):h=this.pendingFiles}),u.modifiers.forEach(b=>{if(d.has(b.name)){(d.get(b.name)??(()=>{}))(b);return}console.warn(`Unknown modifier ${b.name} in action "${s}". Available modifiers are: ${Array.from(d.keys()).join(", ")}.`)});for(const[b,L]of Object.entries(h))L.files&&this.component.files(b,L),delete this.pendingFiles[b];this.component.action(u.action,i,o),Be(e.currentTarget,!1)&&(this.pendingActionTriggerModelElement=e.currentTarget)})}$render(){return this.component.render()}emit(e){this.getEmitDirectives(e).forEach(({name:t,data:s,nameMatch:i})=>{this.component.emit(t,s,i)})}emitUp(e){this.getEmitDirectives(e).forEach(({name:t,data:s,nameMatch:i})=>{this.component.emitUp(t,s,i)})}emitSelf(e){this.getEmitDirectives(e).forEach(({name:t,data:s})=>{this.component.emitSelf(t,s)})}$updateModel(e,t,s=!0,i=!0){return this.component.set(e,t,s,i)}propsUpdatedFromParentValueChanged(){this.component._updateFromParentProps(this.propsUpdatedFromParentValue)}fingerprintValueChanged(){this.component.fingerprint=this.fingerprintValue}getEmitDirectives(e){const t=e.params;if(!t.event)throw new Error(`No event name provided on element: ${dt(e.currentTarget)}. Did you forget to add the "data-live-event-param" attribute?`);const s=t.event,i={...t};delete i.event;const n=Ie(s),o=[];return n.forEach(u=>{let h=null;u.modifiers.forEach(d=>{switch(d.name){case"name":h=d.value;break;default:throw new Error(`Unknown modifier ${d.name} in event "${s}".`)}}),o.push({name:u.action,data:i,nameMatch:h})}),o}createComponent(){const e=this.element.id||null;this.component=new ln(this.element,this.nameValue,this.propsValue,this.listenersValue,e,at.backendFactory(this),new hn(this)),this.proxiedComponent=cn(this.component),Object.defineProperty(this.element,"__component",{value:this.proxiedComponent,writable:!0}),this.hasDebounceValue&&(this.component.defaultDebounce=this.debounceValue),[new fn,new dn,new Tn,new pn,new bn,new An,new Sn(this.queryMappingValue),new un(this.component)].forEach(s=>{this.component.addPlugin(s)})}connectComponent(){this.component.connect(),this.mutationObserver.observe(this.element,{attributes:!0}),this.elementEventListeners.forEach(({event:e,callback:t})=>{this.component.element.addEventListener(e,t)}),this.dispatchEvent("connect")}disconnectComponent(){this.component.disconnect(),this.elementEventListeners.forEach(({event:e,callback:t})=>{this.component.element.removeEventListener(e,t)}),this.dispatchEvent("disconnect")}handleInputEvent(e){const t=e.target;t&&this.updateModelFromElementEvent(t,"input")}handleChangeEvent(e){const t=e.target;t&&this.updateModelFromElementEvent(t,"change")}updateModelFromElementEvent(e,t){var o;if(!ot(e,this.component))return;if(!(e instanceof HTMLElement))throw new Error("Could not update model for non HTMLElement");if(e instanceof HTMLInputElement&&e.type==="file"){const u=e.name;(o=e.files)!=null&&o.length?this.pendingFiles[u]=e:this.pendingFiles[u]&&delete this.pendingFiles[u]}const s=Be(e,!1);if(!s)return;const i=Ds(s);if(i.targetEventName||(i.targetEventName="input"),this.pendingActionTriggerModelElement===e&&(i.shouldRender=!1),t==="change"&&i.targetEventName==="input"&&(i.targetEventName="change"),t&&i.targetEventName!==t)return;i.debounce===!1&&(i.targetEventName==="input"?i.debounce=!0:i.debounce=0);const n=Ut(e,this.component.valueStore);this.component.set(i.modelName,n,i.shouldRender,i.debounce)}dispatchEvent(e,t={},s=!0,i=!1){t.controller=this,t.component=this.proxiedComponent,this.dispatch(e,{detail:t,prefix:"live",cancelable:i,bubbles:s})}onMutations(e){e.forEach(t=>{t.type==="attributes"&&t.attributeName==="id"&&this.element.id!==this.component.id&&(this.disconnectComponent(),this.createComponent(),this.connectComponent())})}}at.values={name:String,url:String,props:{type:Object,default:{}},propsUpdatedFromParent:{type:Object,default:{}},listeners:{type:Array,default:[]},eventsToEmit:{type:Array,default:[]},eventsToDispatch:{type:Array,default:[]},debounce:{type:Number,default:150},fingerprint:{type:String,default:""},requestMethod:{type:String,default:"post"},queryMapping:{type:Object,default:{}}};at.backendFactory=r=>new Ui(r.urlValue,r.requestMethodValue);/*!
Turbo 8.0.13
Copyright  2025 37signals LLC
 */(function(r){if(typeof r.requestSubmit=="function")return;r.requestSubmit=function(s){s?(e(s,this),s.click()):(s=document.createElement("input"),s.type="submit",s.hidden=!0,this.appendChild(s),s.click(),this.removeChild(s))};function e(s,i){s instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),s.type=="submit"||t(TypeError,"The specified element is not a submit button"),s.form==i||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(s,i,n){throw new s("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+i+".",n)}})(HTMLFormElement.prototype);const Ns=new WeakMap;function Mn(r){const e=r instanceof Element?r:r instanceof Node?r.parentElement:null,t=e?e.closest("input, button"):null;return(t==null?void 0:t.type)=="submit"?t:null}function Cn(r){const e=Mn(r.target);e&&e.form&&Ns.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let r=window.Event.prototype;if("SubmitEvent"in window){const e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))r=e;else return}addEventListener("click",Cn,!0),Object.defineProperty(r,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Ns.get(this.target)}})})();const Te={eager:"eager",lazy:"lazy"},St=class St extends HTMLElement{constructor(){super();p(this,"loaded",Promise.resolve());this.delegate=new St.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="src"?this.delegate.sourceURLChanged():t=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(t){t?this.setAttribute("refresh",t):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return Ln(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,s;return(s=(t=this.ownerDocument)==null?void 0:t.documentElement)==null?void 0:s.hasAttribute("data-turbo-preview")}};p(St,"delegateConstructor");let Y=St;function Ln(r){switch(r.toLowerCase()){case"lazy":return Te.lazy;default:return Te.eager}}const kn={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function We(r){if(r.getAttribute("data-turbo-eval")=="false")return r;{const e=document.createElement("script"),t=Us();return t&&(e.nonce=t),e.textContent=r.textContent,e.async=!1,On(e,r),e}}function On(r,e){for(const{name:t,value:s}of e.attributes)r.setAttribute(t,s)}function Rn(r){const e=document.createElement("template");return e.innerHTML=r,e.content}function x(r,{target:e,cancelable:t,detail:s}={}){const i=new CustomEvent(r,{cancelable:t,bubbles:!0,composed:!0,detail:s});return e&&e.isConnected?e.dispatchEvent(i):document.documentElement.dispatchEvent(i),i}function gs(r){r.preventDefault(),r.stopImmediatePropagation()}function xe(){return document.visibilityState==="hidden"?Hs():qs()}function qs(){return new Promise(r=>requestAnimationFrame(()=>r()))}function Hs(){return new Promise(r=>setTimeout(()=>r(),0))}function Pn(){return Promise.resolve()}function Vs(r=""){return new DOMParser().parseFromString(r,"text/html")}function $s(r,...e){const t=Fn(r,e).replace(/^\n/,"").split(`
`),s=t[0].match(/^\s+/),i=s?s[0].length:0;return t.map(n=>n.slice(i)).join(`
`)}function Fn(r,e){return r.reduce((t,s,i)=>{const n=e[i]==null?"":e[i];return t+s+n},"")}function he(){return Array.from({length:36}).map((r,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function vt(r,...e){for(const t of e.map(s=>s==null?void 0:s.getAttribute(r)))if(typeof t=="string")return t;return null}function In(r,...e){return e.some(t=>t&&t.hasAttribute(r))}function yt(...r){for(const e of r)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function Et(...r){for(const e of r)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function Dn(r,e=2e3){return new Promise(t=>{const s=()=>{r.removeEventListener("error",s),r.removeEventListener("load",s),t()};r.addEventListener("load",s,{once:!0}),r.addEventListener("error",s,{once:!0}),setTimeout(t,e)})}function xs(r){switch(r){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Bn(r){return r=="advance"||r=="replace"||r=="restore"}function be(...r){const e=vt("data-turbo-action",...r);return Bn(e)?e:null}function jt(r){return document.querySelector(`meta[name="${r}"]`)}function wt(r){const e=jt(r);return e&&e.content}function Us(){const r=jt("csp-nonce");if(r){const{nonce:e,content:t}=r;return e==""?t:e}}function Nn(r,e){let t=jt(r);return t||(t=document.createElement("meta"),t.setAttribute("name",r),document.head.appendChild(t)),t.setAttribute("content",e),t}function Ce(r,e){var t;if(r instanceof Element)return r.closest(e)||Ce(r.assignedSlot||((t=r.getRootNode())==null?void 0:t.host),e)}function Wt(r){return!!r&&r.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof r.focus=="function"}function js(r){return Array.from(r.querySelectorAll("[autofocus]")).find(Wt)}async function qn(r,e){const t=e();r(),await qs();const s=e();return[t,s]}function Ws(r){if(r==="_blank")return!1;if(r){for(const e of document.getElementsByName(r))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}function _s(r){return Ce(r,"a[href]:not([target^=_]):not([download])")}function zs(r){return z(r.getAttribute("href")||"")}function Hn(r,e){let t=null;return(...s)=>{const i=()=>r.apply(this,s);clearTimeout(t),t=setTimeout(i,e)}}const Vn={"aria-disabled":{beforeSubmit:r=>{r.setAttribute("aria-disabled","true"),r.addEventListener("click",gs)},afterSubmit:r=>{r.removeAttribute("aria-disabled"),r.removeEventListener("click",gs)}},disabled:{beforeSubmit:r=>r.disabled=!0,afterSubmit:r=>r.disabled=!1}};var _e;class $n{constructor(e){N(this,_e,null);Object.assign(this,e)}get submitter(){return k(this,_e)}set submitter(e){H(this,_e,Vn[e]||e)}}_e=new WeakMap;const xn=new $n({mode:"on",submitter:"disabled"}),_={drive:kn,forms:xn};function z(r){return new URL(r.toString(),document.baseURI)}function ve(r){let e;if(r.hash)return r.hash.slice(1);if(e=r.href.match(/#(.*)$/))return e[1]}function _t(r,e){const t=(e==null?void 0:e.getAttribute("formaction"))||r.getAttribute("action")||r.action;return z(t)}function Un(r){return(zn(r).match(/\.[^.]*$/)||[])[0]||""}function jn(r,e){const t=Kn(e);return r.href===z(t).href||r.href.startsWith(t)}function oe(r,e){return jn(r,e)&&!_.drive.unvisitableExtensions.has(Un(r))}function Bt(r){const e=ve(r);return e!=null?r.href.slice(0,-(e.length+1)):r.href}function ht(r){return Bt(r)}function Wn(r,e){return z(r).href==z(e).href}function _n(r){return r.pathname.split("/").slice(1)}function zn(r){return _n(r).slice(-1)[0]}function Kn(r){return Jn(r.origin+r.pathname)}function Jn(r){return r.endsWith("/")?r:r+"/"}class zt{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return z(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}}class Xn extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){const s=this.values().next().value;this.delete(s)}super.add(e)}}const Ks=new Xn(20),Gn=window.fetch;function Js(r,e={}){const t=new Headers(e.headers||{}),s=he();return Ks.add(s),t.append("X-Turbo-Request-Id",s),Gn(r,{...e,headers:t})}function Kt(r){switch(r.toLowerCase()){case"get":return X.get;case"post":return X.post;case"put":return X.put;case"patch":return X.patch;case"delete":return X.delete}}const X={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Qn(r){switch(r.toLowerCase()){case fe.multipart:return fe.multipart;case fe.plain:return fe.plain;default:return fe.urlEncoded}}const fe={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"};var ze,Ne,Xs,Gs;class lt{constructor(e,t,s,i=new URLSearchParams,n=null,o=fe.urlEncoded){N(this,Ne);p(this,"abortController",new AbortController);N(this,ze,e=>{});var d;const[u,h]=bs(z(s),t,i,o);this.delegate=e,this.url=u,this.target=n,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t.toUpperCase(),headers:{...this.defaultHeaders},body:h,signal:this.abortSignal,referrer:(d=this.delegate.referrer)==null?void 0:d.href},this.enctype=o}get method(){return this.fetchOptions.method}set method(e){const t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,s=Kt(e)||X.get;this.url.search="";const[i,n]=bs(this.url,s,t,this.enctype);this.url=i,this.fetchOptions.body=n,this.fetchOptions.method=s.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:e}=this;this.delegate.prepareRequest(this);const t=await R(this,Ne,Xs).call(this,e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=Js(this.url.href,e);const s=await this.response;return await this.receive(s)}catch(s){if(s.name!=="AbortError")throw R(this,Ne,Gs).call(this,s)&&this.delegate.requestErrored(this,s),s}finally{this.delegate.requestFinished(this)}}async receive(e){const t=new zt(e);return x("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return Jt(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}}ze=new WeakMap,Ne=new WeakSet,Xs=async function(e){const t=new Promise(i=>H(this,ze,i)),s=x("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:k(this,ze)},target:this.target});return this.url=s.detail.url,s.defaultPrevented&&await t,s},Gs=function(e){return!x("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented};function Jt(r){return Kt(r)==X.get}function bs(r,e,t,s){const i=Array.from(t).length>0?new URLSearchParams(Qs(t)):r.searchParams;return Jt(e)?[Yn(r,i),null]:s==fe.urlEncoded?[r,i]:[r,t]}function Qs(r){const e=[];for(const[t,s]of r)s instanceof File||e.push([t,s]);return e}function Yn(r,e){const t=new URLSearchParams(Qs(e));return r.search=t.toString(),r}class Zn{constructor(e,t){p(this,"started",!1);p(this,"intersect",e=>{const t=e.slice(-1)[0];t!=null&&t.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)});this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class Ee{static wrap(e){return typeof e=="string"?new this(Rn(e)):e}constructor(e){this.fragment=eo(e)}}p(Ee,"contentType","text/vnd.turbo-stream.html");function eo(r){for(const e of r.querySelectorAll("turbo-stream")){const t=document.importNode(e,!0);for(const s of t.templateElement.content.querySelectorAll("script"))s.replaceWith(We(s));e.replaceWith(t)}return r}const to=100;var me,re;class so{constructor(){N(this,me,null);N(this,re,null)}get(e){if(k(this,re)&&k(this,re).url===e&&k(this,re).expire>Date.now())return k(this,re).request}setLater(e,t,s){this.clear(),H(this,me,setTimeout(()=>{t.perform(),this.set(e,t,s),H(this,me,null)},to))}set(e,t,s){H(this,re,{url:e,request:t,expire:new Date(new Date().getTime()+s)})}clear(){k(this,me)&&clearTimeout(k(this,me)),H(this,re,null)}}me=new WeakMap,re=new WeakMap;const ro=10*1e3,Me=new so,we={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"};class Mt{constructor(e,t,s,i=!1){p(this,"state",we.initialized);const n=co(t,s),o=lo(ao(t,s),n),u=io(t,s),h=ho(t,s);this.delegate=e,this.formElement=t,this.submitter=s,this.fetchRequest=new lt(this,n,o,u,t,h),this.mustRedirect=i}static confirmMethod(e){return Promise.resolve(confirm(e))}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=z(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){const{initialized:e,requesting:t}=we,s=vt("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof s=="string"&&!await(typeof _.forms.confirm=="function"?_.forms.confirm:Mt.confirmMethod)(s,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){const{stopping:e,stopped:t}=we;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){const t=no(wt("csrf-param"))||wt("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Ee.contentType)}requestStarted(e){this.state=we.waiting,this.submitter&&_.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),yt(this.formElement),x("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){Me.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if(Me.clear(),this.requestMustRedirect(e)&&oo(t)){const s=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,s)}else this.state=we.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=we.stopped,this.submitter&&_.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),Et(this.formElement),x("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||In("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var e;return(e=this.submitter)==null?void 0:e.getAttribute("data-turbo-submits-with")}}function io(r,e){const t=new FormData(r),s=e==null?void 0:e.getAttribute("name"),i=e==null?void 0:e.getAttribute("value");return s&&t.append(s,i||""),t}function no(r){if(r!=null){const t=(document.cookie?document.cookie.split("; "):[]).find(s=>s.startsWith(r));if(t){const s=t.split("=").slice(1).join("=");return s?decodeURIComponent(s):void 0}}}function oo(r){return r.statusCode==200&&!r.redirected}function ao(r,e){const t=typeof r.action=="string"?r.action:null;return e!=null&&e.hasAttribute("formaction")?e.getAttribute("formaction")||"":r.getAttribute("action")||t||""}function lo(r,e){const t=z(r);return Jt(e)&&(t.search=""),t}function co(r,e){const t=(e==null?void 0:e.getAttribute("formmethod"))||r.getAttribute("method")||"";return Kt(t.toLowerCase())||X.get}function ho(r,e){return Qn((e==null?void 0:e.getAttribute("formenctype"))||r.enctype)}class Ct{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return js(this.element)}get permanentElements(){return Zs(this.element)}getPermanentElementById(e){return Ys(this.element,e)}getPermanentElementMapForSnapshot(e){const t={};for(const s of this.permanentElements){const{id:i}=s,n=e.getPermanentElementById(i);n&&(t[i]=[s,n])}return t}}function Ys(r,e){return r.querySelector(`#${e}[data-turbo-permanent]`)}function Zs(r){return r.querySelectorAll("[id][data-turbo-permanent]")}class Xt{constructor(e,t){p(this,"started",!1);p(this,"submitCaptured",()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)});p(this,"submitBubbled",e=>{if(!e.defaultPrevented){const t=e.target instanceof HTMLFormElement?e.target:void 0,s=e.submitter||void 0;t&&uo(t,s)&&fo(t,s)&&this.delegate.willSubmitForm(t,s)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,s))}});this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function uo(r,e){return((e==null?void 0:e.getAttribute("formmethod"))||r.getAttribute("method"))!="dialog"}function fo(r,e){const t=(e==null?void 0:e.getAttribute("formtarget"))||r.getAttribute("target");return Ws(t)}var Ke,Je;class er{constructor(e,t){N(this,Ke,e=>{});N(this,Je,e=>{});this.delegate=e,this.element=t}scrollToAnchor(e){const t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(ve(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){const{isPreview:t,shouldRender:s,willRender:i,newSnapshot:n}=e,o=i;if(s)try{this.renderPromise=new Promise(b=>H(this,Ke,b)),this.renderer=e,await this.prepareToRenderSnapshot(e);const u=new Promise(b=>H(this,Je,b)),h={resume:k(this,Je),render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(n,h)||await u,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(n,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,k(this,Ke).call(this,void 0),delete this.renderPromise}else o&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}}Ke=new WeakMap,Je=new WeakMap;class mo extends er{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Ct(this.element)}}class tr{constructor(e,t){p(this,"clickBubbled",e=>{this.clickEventIsSignificant(e)?this.clickEvent=e:delete this.clickEvent});p(this,"linkClicked",e=>{this.clickEvent&&this.clickEventIsSignificant(e)&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent});p(this,"willVisit",e=>{delete this.clickEvent});this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickEventIsSignificant(e){var i;const t=e.composed?(i=e.target)==null?void 0:i.parentElement:e.target,s=_s(t)||t;return s instanceof Element&&s.closest("turbo-frame, html")==this.element}}class sr{constructor(e,t){p(this,"started",!1);p(this,"clickCaptured",()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)});p(this,"clickBubbled",e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){const t=e.composedPath&&e.composedPath()[0]||e.target,s=_s(t);if(s&&Ws(s.target)){const i=zs(s);this.delegate.willFollowLinkToLocation(s,i,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(s,i))}}});this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}}class rr{constructor(e,t){this.delegate=e,this.linkInterceptor=new sr(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,s){return this.delegate.willSubmitFormLinkToLocation(e,t,s)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){const s=document.createElement("form"),i="hidden";for(const[L,w]of t.searchParams)s.append(Object.assign(document.createElement("input"),{type:i,name:L,value:w}));const n=Object.assign(t,{search:""});s.setAttribute("data-turbo","true"),s.setAttribute("action",n.href),s.setAttribute("hidden","");const o=e.getAttribute("data-turbo-method");o&&s.setAttribute("method",o);const u=e.getAttribute("data-turbo-frame");u&&s.setAttribute("data-turbo-frame",u);const h=be(e);h&&s.setAttribute("data-turbo-action",h);const d=e.getAttribute("data-turbo-confirm");d&&s.setAttribute("data-turbo-confirm",d),e.hasAttribute("data-turbo-stream")&&s.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,s),document.body.appendChild(s),s.addEventListener("turbo:submit-end",()=>s.remove(),{once:!0}),requestAnimationFrame(()=>s.requestSubmit())}}class ir{static async preservingPermanentElements(e,t,s){const i=new this(e,t);i.enter(),await s(),i.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(const e in this.permanentElementMap){const[t,s]=this.permanentElementMap[e];this.delegate.enteringBardo(t,s),this.replaceNewPermanentElementWithPlaceholder(s)}}leave(){for(const e in this.permanentElementMap){const[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){const t=po(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){const t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){const t=this.getPlaceholderById(e.id);t==null||t.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function po(r){const e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",r.id),e}var ie;class Gt{constructor(e,t,s,i=!0){N(this,ie,null);this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=s,this.willRender=i,this.renderElement=this.constructor.renderElement,this.promise=new Promise((n,o)=>this.resolvingFunctions={resolve:n,reject:o})}static renderElement(e,t){}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await ir.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){const e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}}enteringBardo(e){k(this,ie)||e.contains(this.currentSnapshot.activeElement)&&H(this,ie,this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(k(this,ie))&&k(this,ie)instanceof HTMLElement&&(k(this,ie).focus(),H(this,ie,null))}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}}ie=new WeakMap;class Qt extends Gt{static renderElement(e,t){var o;const s=document.createRange();s.selectNodeContents(e),s.deleteContents();const i=t,n=(o=i.ownerDocument)==null?void 0:o.createRange();n&&(n.selectNodeContents(i),e.appendChild(n.extractContents()))}constructor(e,t,s,i,n,o=!0){super(t,s,i,n,o),this.delegate=e}get shouldRender(){return!0}async render(){await xe(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await xe(),this.focusFirstAutofocusableElement(),await xe(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const e=this.currentElement.firstElementChild,t=go(this.currentElement.getAttribute("data-autoscroll-block"),"end"),s=bo(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:s}),!0}return!1}activateScriptElements(){for(const e of this.newScriptElements){const t=We(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function go(r,e){return r=="end"||r=="start"||r=="center"||r=="nearest"?r:e}function bo(r,e){return r=="auto"||r=="smooth"?r:e}var vo=function(){const r=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:r,afterNodeAdded:r,beforeNodeMorphed:r,afterNodeMorphed:r,beforeNodeRemoved:r,afterNodeRemoved:r,beforeAttributeUpdated:r},head:{style:"merge",shouldPreserve:w=>w.getAttribute("im-preserve")==="true",shouldReAppend:w=>w.getAttribute("im-re-append")==="true",shouldRemove:r,afterHeadMorphed:r},restoreFocus:!0};function t(w,q,I={}){w=b(w);const P=L(q),O=d(w,P,I),C=i(O,()=>u(O,w,P,g=>g.morphStyle==="innerHTML"?(n(g,w,P),Array.from(w.childNodes)):s(g,w,P)));return O.pantry.remove(),C}function s(w,q,I){const P=L(q);let O=Array.from(P.childNodes);const C=O.indexOf(q),g=O.length-(C+1);return n(w,P,I,q,q.nextSibling),O=Array.from(P.childNodes),O.slice(C,O.length-g)}function i(w,q){var v;if(!w.config.restoreFocus)return q();let I=document.activeElement;if(!(I instanceof HTMLInputElement||I instanceof HTMLTextAreaElement))return q();const{id:P,selectionStart:O,selectionEnd:C}=I,g=q();return P&&P!==((v=document.activeElement)==null?void 0:v.id)&&(I=w.target.querySelector(`#${P}`),I==null||I.focus()),I&&!I.selectionEnd&&C&&I.setSelectionRange(O,C),g}const n=function(){function w(f,m,T,y=null,S=null){m instanceof HTMLTemplateElement&&T instanceof HTMLTemplateElement&&(m=m.content,T=T.content),y||(y=m.firstChild);for(const D of T.childNodes){if(y&&y!=S){const V=I(f,D,y,S);if(V){V!==y&&O(f,y,V),o(V,D,f),y=V.nextSibling;continue}}if(D instanceof Element&&f.persistentIds.has(D.id)){const V=C(m,D.id,y,f);o(V,D,f),y=V.nextSibling;continue}const $=q(m,D,y,f);$&&(y=$.nextSibling)}for(;y&&y!=S;){const D=y;y=y.nextSibling,P(f,D)}}function q(f,m,T,y){if(y.callbacks.beforeNodeAdded(m)===!1)return null;if(y.idMap.has(m)){const S=document.createElement(m.tagName);return f.insertBefore(S,T),o(S,m,y),y.callbacks.afterNodeAdded(S),S}else{const S=document.importNode(m,!0);return f.insertBefore(S,T),y.callbacks.afterNodeAdded(S),S}}const I=function(){function f(y,S,D,$){let V=null,K=S.nextSibling,ne=0,J=D;for(;J&&J!=$;){if(T(J,S)){if(m(y,J,S))return J;V===null&&(y.idMap.has(J)||(V=J))}if(V===null&&K&&T(J,K)&&(ne++,K=K.nextSibling,ne>=2&&(V=void 0)),J.contains(document.activeElement))break;J=J.nextSibling}return V||null}function m(y,S,D){let $=y.idMap.get(S),V=y.idMap.get(D);if(!V||!$)return!1;for(const K of $)if(V.has(K))return!0;return!1}function T(y,S){const D=y,$=S;return D.nodeType===$.nodeType&&D.tagName===$.tagName&&(!D.id||D.id===$.id)}return f}();function P(f,m){var T;if(f.idMap.has(m))v(f.pantry,m,null);else{if(f.callbacks.beforeNodeRemoved(m)===!1)return;(T=m.parentNode)==null||T.removeChild(m),f.callbacks.afterNodeRemoved(m)}}function O(f,m,T){let y=m;for(;y&&y!==T;){let S=y;y=y.nextSibling,P(f,S)}return y}function C(f,m,T,y){const S=y.target.querySelector(`#${m}`)||y.pantry.querySelector(`#${m}`);return g(S,y),v(f,S,T),S}function g(f,m){const T=f.id;for(;f=f.parentNode;){let y=m.idMap.get(f);y&&(y.delete(T),y.size||m.idMap.delete(f))}}function v(f,m,T){if(f.moveBefore)try{f.moveBefore(m,T)}catch{f.insertBefore(m,T)}else f.insertBefore(m,T)}return w}(),o=function(){function w(g,v,f){return f.ignoreActive&&g===document.activeElement?null:(f.callbacks.beforeNodeMorphed(g,v)===!1||(g instanceof HTMLHeadElement&&f.head.ignore||(g instanceof HTMLHeadElement&&f.head.style!=="morph"?h(g,v,f):(q(g,v,f),C(g,f)||n(f,g,v))),f.callbacks.afterNodeMorphed(g,v)),g)}function q(g,v,f){let m=v.nodeType;if(m===1){const T=g,y=v,S=T.attributes,D=y.attributes;for(const $ of D)O($.name,T,"update",f)||T.getAttribute($.name)!==$.value&&T.setAttribute($.name,$.value);for(let $=S.length-1;0<=$;$--){const V=S[$];if(V&&!y.hasAttribute(V.name)){if(O(V.name,T,"remove",f))continue;T.removeAttribute(V.name)}}C(T,f)||I(T,y,f)}(m===8||m===3)&&g.nodeValue!==v.nodeValue&&(g.nodeValue=v.nodeValue)}function I(g,v,f){if(g instanceof HTMLInputElement&&v instanceof HTMLInputElement&&v.type!=="file"){let m=v.value,T=g.value;P(g,v,"checked",f),P(g,v,"disabled",f),v.hasAttribute("value")?T!==m&&(O("value",g,"update",f)||(g.setAttribute("value",m),g.value=m)):O("value",g,"remove",f)||(g.value="",g.removeAttribute("value"))}else if(g instanceof HTMLOptionElement&&v instanceof HTMLOptionElement)P(g,v,"selected",f);else if(g instanceof HTMLTextAreaElement&&v instanceof HTMLTextAreaElement){let m=v.value,T=g.value;if(O("value",g,"update",f))return;m!==T&&(g.value=m),g.firstChild&&g.firstChild.nodeValue!==m&&(g.firstChild.nodeValue=m)}}function P(g,v,f,m){const T=v[f],y=g[f];if(T!==y){const S=O(f,g,"update",m);S||(g[f]=v[f]),T?S||g.setAttribute(f,""):O(f,g,"remove",m)||g.removeAttribute(f)}}function O(g,v,f,m){return g==="value"&&m.ignoreActiveValue&&v===document.activeElement?!0:m.callbacks.beforeAttributeUpdated(g,v,f)===!1}function C(g,v){return!!v.ignoreActiveValue&&g===document.activeElement&&g!==document.body}return w}();function u(w,q,I,P){if(w.head.block){const O=q.querySelector("head"),C=I.querySelector("head");if(O&&C){const g=h(O,C,w);return Promise.all(g).then(()=>{const v=Object.assign(w,{head:{block:!1,ignore:!0}});return P(v)})}}return P(w)}function h(w,q,I){let P=[],O=[],C=[],g=[],v=new Map;for(const m of q.children)v.set(m.outerHTML,m);for(const m of w.children){let T=v.has(m.outerHTML),y=I.head.shouldReAppend(m),S=I.head.shouldPreserve(m);T||S?y?O.push(m):(v.delete(m.outerHTML),C.push(m)):I.head.style==="append"?y&&(O.push(m),g.push(m)):I.head.shouldRemove(m)!==!1&&O.push(m)}g.push(...v.values());let f=[];for(const m of g){let T=document.createRange().createContextualFragment(m.outerHTML).firstChild;if(I.callbacks.beforeNodeAdded(T)!==!1){if("href"in T&&T.href||"src"in T&&T.src){let y,S=new Promise(function(D){y=D});T.addEventListener("load",function(){y()}),f.push(S)}w.appendChild(T),I.callbacks.afterNodeAdded(T),P.push(T)}}for(const m of O)I.callbacks.beforeNodeRemoved(m)!==!1&&(w.removeChild(m),I.callbacks.afterNodeRemoved(m));return I.head.afterHeadMorphed(w,{added:P,kept:C,removed:O}),f}const d=function(){function w(v,f,m){const{persistentIds:T,idMap:y}=C(v,f),S=q(m),D=S.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(D))throw`Do not understand how to morph style ${D}`;return{target:v,newContent:f,config:S,morphStyle:D,ignoreActive:S.ignoreActive,ignoreActiveValue:S.ignoreActiveValue,restoreFocus:S.restoreFocus,idMap:y,persistentIds:T,pantry:I(),callbacks:S.callbacks,head:S.head}}function q(v){let f=Object.assign({},e);return Object.assign(f,v),f.callbacks=Object.assign({},e.callbacks,v.callbacks),f.head=Object.assign({},e.head,v.head),f}function I(){const v=document.createElement("div");return v.hidden=!0,document.body.insertAdjacentElement("afterend",v),v}function P(v){let f=Array.from(v.querySelectorAll("[id]"));return v.id&&f.push(v),f}function O(v,f,m,T){for(const y of T)if(f.has(y.id)){let S=y;for(;S;){let D=v.get(S);if(D==null&&(D=new Set,v.set(S,D)),D.add(y.id),S===m)break;S=S.parentElement}}}function C(v,f){const m=P(v),T=P(f),y=g(m,T);let S=new Map;O(S,y,v,m);const D=f.__idiomorphRoot||f;return O(S,y,D,T),{persistentIds:y,idMap:S}}function g(v,f){let m=new Set,T=new Map;for(const{id:S,tagName:D}of v)T.has(S)?m.add(S):T.set(S,D);let y=new Set;for(const{id:S,tagName:D}of f)y.has(S)?m.add(S):T.get(S)===D&&y.add(S);for(const S of m)y.delete(S);return y}return w}(),{normalizeElement:b,normalizeParent:L}=function(){const w=new WeakSet;function q(C){return C instanceof Document?C.documentElement:C}function I(C){if(C==null)return document.createElement("div");if(typeof C=="string")return I(O(C));if(w.has(C))return C;if(C instanceof Node){if(C.parentNode)return P(C);{const g=document.createElement("div");return g.append(C),g}}else{const g=document.createElement("div");for(const v of[...C])g.append(v);return g}}function P(C){return{childNodes:[C],querySelectorAll:g=>{const v=C.querySelectorAll(g);return C.matches(g)?[C,...v]:v},insertBefore:(g,v)=>C.parentNode.insertBefore(g,v),moveBefore:(g,v)=>C.parentNode.moveBefore(g,v),get __idiomorphRoot(){return C}}}function O(C){let g=new DOMParser,v=C.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(v.match(/<\/html>/)||v.match(/<\/head>/)||v.match(/<\/body>/)){let f=g.parseFromString(C,"text/html");if(v.match(/<\/html>/))return w.add(f),f;{let m=f.firstChild;return m&&w.add(m),m}}else{let m=g.parseFromString("<body><template>"+C+"</template></body>","text/html").body.querySelector("template").content;return w.add(m),m}}return{normalizeElement:q,normalizeParent:I}}();return{morph:t,defaults:e}}();function Yt(r,e,{callbacks:t,...s}={}){vo.morph(r,e,{...s,callbacks:new yo(t)})}function nr(r,e){Yt(r,e.childNodes,{morphStyle:"innerHTML"})}var Xe;class yo{constructor({beforeNodeMorphed:e}={}){N(this,Xe);p(this,"beforeNodeAdded",e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id)));p(this,"beforeNodeMorphed",(e,t)=>{if(e instanceof Element)return!e.hasAttribute("data-turbo-permanent")&&k(this,Xe).call(this,e,t)?!x("turbo:before-morph-element",{cancelable:!0,target:e,detail:{currentElement:e,newElement:t}}).defaultPrevented:!1});p(this,"beforeAttributeUpdated",(e,t,s)=>!x("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:s}}).defaultPrevented);p(this,"beforeNodeRemoved",e=>this.beforeNodeMorphed(e));p(this,"afterNodeMorphed",(e,t)=>{e instanceof Element&&x("turbo:morph-element",{target:e,detail:{currentElement:e,newElement:t}})});H(this,Xe,e||(()=>!0))}}Xe=new WeakMap;class Eo extends Qt{static renderElement(e,t){x("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),nr(e,t)}async preservingPermanentElements(e){return await e()}}const se=class se{constructor(){p(this,"hiding",!1);p(this,"value",0);p(this,"visible",!1);p(this,"trickle",()=>{this.setValue(this.value+Math.random()/100)});this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return $s`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${se.animationDuration}ms ease-out,
          opacity ${se.animationDuration/2}ms ${se.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,se.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,se.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const e=document.createElement("style");e.type="text/css",e.textContent=se.defaultCSS;const t=Us();return t&&(e.nonce=t),e}createProgressElement(){const e=document.createElement("div");return e.className="turbo-progress-bar",e}};p(se,"animationDuration",300);let Nt=se;class wo extends Ct{constructor(){super(...arguments);p(this,"detailsByOuterHTML",this.children.filter(t=>!Mo(t)).map(t=>ko(t)).reduce((t,s)=>{const{outerHTML:i}=s,n=i in t?t[i]:{type:So(s),tracked:Ao(s),elements:[]};return{...t,[i]:{...n,elements:[...n.elements,s]}}},{}))}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,s){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in s.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==t).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,s)=>{const{type:i,tracked:n,elements:o}=this.detailsByOuterHTML[s];return i==null&&!n?[...t,...o]:o.length>1?[...t,...o.slice(1)]:t},[])}getMetaValue(t){const s=this.findMetaElementByName(t);return s?s.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((s,i)=>{const{elements:[n]}=this.detailsByOuterHTML[i];return Lo(n,t)?n:s},void 0|void 0)}}function So(r){if(To(r))return"script";if(Co(r))return"stylesheet"}function Ao(r){return r.getAttribute("data-turbo-track")=="reload"}function To(r){return r.localName=="script"}function Mo(r){return r.localName=="noscript"}function Co(r){const e=r.localName;return e=="style"||e=="link"&&r.getAttribute("rel")=="stylesheet"}function Lo(r,e){return r.localName=="meta"&&r.getAttribute("name")==e}function ko(r){return r.hasAttribute("nonce")&&r.setAttribute("nonce",""),r}class Q extends Ct{static fromHTMLString(e=""){return this.fromDocument(Vs(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:s}){return new this(e,t,new wo(s))}constructor(e,t,s){super(t),this.documentElement=e,this.headSnapshot=s}clone(){const e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),s=e.querySelectorAll("select");for(const[i,n]of t.entries()){const o=s[i];for(const u of o.selectedOptions)u.selected=!1;for(const u of n.selectedOptions)o.options[u.index].selected=!0}for(const i of e.querySelectorAll('input[type="password"]'))i.value="";return new Q(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){const e=this.getSetting("root")??"/";return z(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}}var Ge,ae;class Oo{constructor(){N(this,Ge,!1);N(this,ae,Promise.resolve())}renderChange(e,t){return e&&this.viewTransitionsAvailable&&!k(this,Ge)?(H(this,Ge,!0),H(this,ae,k(this,ae).then(async()=>{await document.startViewTransition(t).finished}))):H(this,ae,k(this,ae).then(t)),k(this,ae)}get viewTransitionsAvailable(){return document.startViewTransition}}Ge=new WeakMap,ae=new WeakMap;const Ro={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},ut={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},te={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Le={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Po={advance:"forward",restore:"back",replace:"none"};class Fo{constructor(e,t,s,i={}){p(this,"identifier",he());p(this,"timingMetrics",{});p(this,"followedRedirect",!1);p(this,"historyChanged",!1);p(this,"scrolled",!1);p(this,"shouldCacheSnapshot",!0);p(this,"acceptsStreamResponse",!1);p(this,"snapshotCached",!1);p(this,"state",te.initialized);p(this,"viewTransitioner",new Oo);this.delegate=e,this.location=t,this.restorationIdentifier=s||he();const{action:n,historyChanged:o,referrer:u,snapshot:h,snapshotHTML:d,response:b,visitCachedSnapshot:L,willRender:w,updateHistory:q,shouldCacheSnapshot:I,acceptsStreamResponse:P,direction:O}={...Ro,...i};this.action=n,this.historyChanged=o,this.referrer=u,this.snapshot=h,this.snapshotHTML=d,this.response=b,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=L,this.willRender=w,this.updateHistory=q,this.scrolled=!w,this.shouldCacheSnapshot=I,this.acceptsStreamResponse=P,this.direction=O||Po[n]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==te.initialized&&(this.recordTimingMetric(ut.visitStart),this.state=te.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==te.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=te.canceled)}complete(){this.state==te.started&&(this.recordTimingMetric(ut.visitEnd),this.adapter.visitCompleted(this),this.state=te.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==te.started&&(this.state=te.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){var e;if(!this.historyChanged&&this.updateHistory){const t=this.location.href===((e=this.referrer)==null?void 0:e.href)?"replace":this.action,s=xs(t);this.history.update(s,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new lt(this,X.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(ut.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){const{statusCode:t}=e;vs(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(ut.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,vs(e)&&t!=null){const s=Q.fromHTMLString(t);await this.renderPageSnapshot(s,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(Q.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){const e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!ve(this.location)||e.hasAnchor(ve(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return Q.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const e=this.getCachedSnapshot();if(e){const t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){var e;this.redirectedToLocation&&!this.followedRedirect&&((e=this.response)!=null&&e.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Ee.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){const s=await t.responseHTML,{redirected:i,statusCode:n}=t;s==null?this.recordResponse({statusCode:Le.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:n,responseHTML:s,redirected:i}))}async requestFailedWithResponse(e,t){const s=await t.responseHTML,{redirected:i,statusCode:n}=t;s==null?this.recordResponse({statusCode:Le.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:n,responseHTML:s,redirected:i})}requestErrored(e,t){this.recordResponse({statusCode:Le.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){const e=ve(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise(t=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>t(),0):requestAnimationFrame(()=>t())}),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function vs(r){return r>=200&&r<300}class Io{constructor(e){p(this,"progressBar",new Nt);p(this,"showProgressBar",()=>{this.progressBar.show()});this.session=e}visitProposedToLocation(e,t){oe(e,this.navigator.rootLocation)?this.navigator.startVisit(e,(t==null?void 0:t.restorationIdentifier)||he(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case Le.networkFailure:case Le.timeoutFailure:case Le.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}linkPrefetchingIsEnabledForLocation(e){return!0}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(e){var t;x("turbo:reload",{detail:e}),window.location.href=((t=this.location)==null?void 0:t.toString())||window.location.href}get navigator(){return this.session.navigator}}class Do{constructor(){p(this,"selector","[data-turbo-temporary]");p(this,"deprecatedSelector","[data-turbo-cache=false]");p(this,"started",!1);p(this,"removeTemporaryElements",e=>{for(const t of this.temporaryElements)t.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}}var G,or,ft,mt;class Bo{constructor(e,t){N(this,G);this.session=e,this.element=t,this.linkInterceptor=new tr(this,t),this.formSubmitObserver=new Xt(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,s){return R(this,G,ft).call(this,e)}linkClickIntercepted(e,t,s){const i=R(this,G,mt).call(this,e);i&&i.delegate.linkClickIntercepted(e,t,s)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&R(this,G,or).call(this,e,t)&&R(this,G,ft).call(this,e,t)}formSubmitted(e,t){const s=R(this,G,mt).call(this,e,t);s&&s.delegate.formSubmitted(e,t)}}G=new WeakSet,or=function(e,t){const s=_t(e,t),i=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),n=z((i==null?void 0:i.content)??"/");return R(this,G,ft).call(this,e,t)&&oe(s,n)},ft=function(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){const i=R(this,G,mt).call(this,e,t);return i?i!=e.closest("turbo-frame"):!1}else return!1},mt=function(e,t){const s=(t==null?void 0:t.getAttribute("data-turbo-frame"))||e.getAttribute("data-turbo-frame");if(s&&s!="_top"){const i=this.element.querySelector(`#${s}:not([disabled])`);if(i instanceof Y)return i}};class No{constructor(e){p(this,"location");p(this,"restorationIdentifier",he());p(this,"restorationData",{});p(this,"started",!1);p(this,"pageLoaded",!1);p(this,"currentIndex",0);p(this,"onPopState",e=>{if(this.shouldHandlePopState()){const{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);const{restorationIdentifier:s,restorationIndex:i}=t;this.restorationIdentifier=s;const n=i>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,s,n),this.currentIndex=i}}});p(this,"onPageLoad",async e=>{await Pn(),this.pageLoaded=!0});this.delegate=e}start(){var e,t;this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=((t=(e=history.state)==null?void 0:e.turbo)==null?void 0:t.restorationIndex)||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,s=he()){e===history.pushState&&++this.currentIndex;const i={turbo:{restorationIdentifier:s,restorationIndex:this.currentIndex}};e.call(history,i,"",t.href),this.location=t,this.restorationIdentifier=s}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){const{restorationIdentifier:t}=this,s=this.restorationData[t];this.restorationData[t]={...s,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}var ke,Qe,Ye,Ze,At,et,qe,ar,lr;class qo{constructor(e,t){N(this,qe);p(this,"started",!1);N(this,ke,null);N(this,Qe,()=>{this.eventTarget.addEventListener("mouseenter",k(this,Ye),{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",k(this,Ze),{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",k(this,et),!0),this.started=!0});N(this,Ye,e=>{if(wt("turbo-prefetch")==="false")return;const t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&R(this,qe,lr).call(this,t)){const i=t,n=zs(i);if(this.delegate.canPrefetchRequestToLocation(i,n)){H(this,ke,i);const o=new lt(this,X.get,n,new URLSearchParams,t);Me.setLater(n.toString(),o,k(this,qe,ar))}}});N(this,Ze,e=>{e.target===k(this,ke)&&k(this,At).call(this)});N(this,At,()=>{Me.clear(),H(this,ke,null)});N(this,et,e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="GET"){const t=Me.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),Me.clear()}});this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",k(this,Qe),{once:!0}):k(this,Qe).call(this))}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",k(this,Ye),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",k(this,Ze),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",k(this,et),!0),this.started=!1)}prepareRequest(e){const t=e.target;e.headers["X-Sec-Purpose"]="prefetch";const s=t.closest("turbo-frame"),i=t.getAttribute("data-turbo-frame")||(s==null?void 0:s.getAttribute("target"))||(s==null?void 0:s.id);i&&i!=="_top"&&(e.headers["Turbo-Frame"]=i)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}}ke=new WeakMap,Qe=new WeakMap,Ye=new WeakMap,Ze=new WeakMap,At=new WeakMap,et=new WeakMap,qe=new WeakSet,ar=function(){return Number(wt("turbo-prefetch-cache-time"))||ro},lr=function(e){return!(!e.getAttribute("href")||Ho(e)||Vo(e)||$o(e)||xo(e)||jo(e))};const Ho=r=>r.origin!==document.location.origin||!["http:","https:"].includes(r.protocol)||r.hasAttribute("target"),Vo=r=>r.pathname+r.search===document.location.pathname+document.location.search||r.href.startsWith("#"),$o=r=>{if(r.getAttribute("data-turbo-prefetch")==="false"||r.getAttribute("data-turbo")==="false")return!0;const e=Ce(r,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},xo=r=>{const e=r.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||Uo(r)||r.hasAttribute("data-turbo-confirm")||r.hasAttribute("data-turbo-stream"))},Uo=r=>r.hasAttribute("data-remote")||r.hasAttribute("data-behavior")||r.hasAttribute("data-confirm")||r.hasAttribute("data-method"),jo=r=>x("turbo:before-prefetch",{target:r,cancelable:!0}).defaultPrevented;var He,cr,hr;class Wo{constructor(e){N(this,He);this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,s={}){this.stop(),this.currentVisit=new Fo(this,z(e),t,{referrer:this.location,...s}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new Mt(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){const s=await t.responseHTML;if(s){const i=e.isSafe;i||this.view.clearSnapshotCache();const{statusCode:n,redirected:o}=t,h={action:R(this,He,cr).call(this,e,t),shouldCacheSnapshot:i,response:{statusCode:n,responseHTML:s,redirected:o}};this.proposeVisit(t.location,h)}}}async formSubmissionFailedWithResponse(e,t){const s=await t.responseHTML;if(s){const i=Q.fromHTMLString(s);t.serverError?await this.view.renderError(i,this.currentVisit):await this.view.renderPage(i,!1,!0,this.currentVisit),i.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}linkPrefetchingIsEnabledForLocation(e){return typeof this.adapter.linkPrefetchingIsEnabledForLocation=="function"?this.adapter.linkPrefetchingIsEnabledForLocation(e):!0}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e),delete this.currentVisit}locationWithActionIsSamePage(e,t){const s=ve(e),i=ve(this.view.lastRenderedLocation),n=t==="restore"&&typeof s>"u";return t!=="replace"&&Bt(e)===Bt(this.view.lastRenderedLocation)&&(n||s!=null&&s!==i)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}}He=new WeakSet,cr=function(e,t){const{submitter:s,formElement:i}=e;return be(s,i)||R(this,He,hr).call(this,t)},hr=function(e){var s;return e.redirected&&e.location.href===((s=this.location)==null?void 0:s.href)?"replace":"advance"};const de={initial:0,loading:1,interactive:2,complete:3};class _o{constructor(e){p(this,"stage",de.initial);p(this,"started",!1);p(this,"interpretReadyState",()=>{const{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()});p(this,"pageWillUnload",()=>{this.delegate.pageWillUnload()});this.delegate=e}start(){this.started||(this.stage==de.initial&&(this.stage=de.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==de.loading&&(this.stage=de.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==de.interactive&&(this.stage=de.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class zo{constructor(e){p(this,"started",!1);p(this,"onScroll",()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})});this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(e){this.delegate.scrollPositionChanged(e)}}class Ko{render({fragment:e}){ir.preservingPermanentElements(this,Jo(e),()=>{Xo(e,()=>{Go(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}}function Jo(r){const e=Zs(document.documentElement),t={};for(const s of e){const{id:i}=s;for(const n of r.querySelectorAll("turbo-stream")){const o=Ys(n.templateElement.content,i);o&&(t[i]=[s,o])}}return t}async function Xo(r,e){const t=`turbo-stream-autofocus-${he()}`,s=r.querySelectorAll("turbo-stream"),i=Qo(s);let n=null;if(i&&(i.id?n=i.id:n=t,i.id=n),e(),await xe(),(document.activeElement==null||document.activeElement==document.body)&&n){const u=document.getElementById(n);Wt(u)&&u.focus(),u&&u.id==t&&u.removeAttribute("id")}}async function Go(r){const[e,t]=await qn(r,()=>document.activeElement),s=e&&e.id;if(s){const i=document.getElementById(s);Wt(i)&&i!=t&&i.focus()}}function Qo(r){for(const e of r){const t=js(e.templateElement.content);if(t)return t}return null}var le;class Yo{constructor(e){p(this,"sources",new Set);N(this,le,!1);p(this,"inspectFetchResponse",e=>{const t=Zo(e);t&&ea(t)&&(e.preventDefault(),this.receiveMessageResponse(t))});p(this,"receiveMessageEvent",e=>{k(this,le)&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)});this.delegate=e}start(){k(this,le)||(H(this,le,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){k(this,le)&&(H(this,le,!1),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}async receiveMessageResponse(e){const t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Ee.wrap(e))}}le=new WeakMap;function Zo(r){var t;const e=(t=r.detail)==null?void 0:t.fetchResponse;if(e instanceof zt)return e}function ea(r){return(r.contentType??"").startsWith(Ee.contentType)}class ta extends Gt{static renderElement(e,t){const{documentElement:s,body:i}=document;s.replaceChild(t,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const e of this.scriptElements){const t=e.parentNode;if(t){const s=We(e);t.replaceChild(s,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}var Tt,ur;class Zt extends Gt{constructor(){super(...arguments);N(this,Tt)}static renderElement(t,s){document.body&&s instanceof HTMLBodyElement?document.body.replaceWith(s):document.documentElement.appendChild(s)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){R(this,Tt,ur).call(this),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),s=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await s,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const s of this.newHeadStylesheetElements)t.push(Dn(s)),document.head.appendChild(s);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild(We(t))}removeUnusedDynamicStylesheetElements(){for(const t of this.unusedDynamicStylesheetElements)document.head.removeChild(t)}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const s of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(s,t)||document.head.removeChild(s);for(const s of t)document.head.appendChild(s)}isCurrentElementInElementList(t,s){for(const[i,n]of s.entries()){if(t.tagName=="TITLE"){if(n.tagName!="TITLE")continue;if(t.innerHTML==n.innerHTML)return s.splice(i,1),!0}if(n.isEqualNode(t))return s.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const s=We(t);t.replaceWith(s)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(t=>t.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}Tt=new WeakSet,ur=function(){const{documentElement:t}=this.currentSnapshot,{lang:s}=this.newSnapshot;s?t.setAttribute("lang",s):t.removeAttribute("lang")};class sa extends Zt{static renderElement(e,t){Yt(e,t,{callbacks:{beforeNodeMorphed:s=>!ys(s)}});for(const s of e.querySelectorAll("turbo-frame"))ys(s)&&s.reload();x("turbo:morph",{detail:{currentElement:e,newElement:t}})}async preservingPermanentElements(e){return await e()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}}function ys(r){return r instanceof Y&&r.src&&r.refresh==="morph"&&!r.closest("[data-turbo-permanent]")}class ra{constructor(e){p(this,"keys",[]);p(this,"snapshots",{});this.size=e}has(e){return ht(e)in this.snapshots}get(e){if(this.has(e)){const t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[ht(e)]}write(e,t){this.snapshots[ht(e)]=t}touch(e){const t=ht(e),s=this.keys.indexOf(t);s>-1&&this.keys.splice(s,1),this.keys.unshift(t),this.trim()}trim(){for(const e of this.keys.splice(this.size))delete this.snapshots[e]}}class ia extends er{constructor(){super(...arguments);p(this,"snapshotCache",new ra(10));p(this,"lastRenderedLocation",new URL(location.href));p(this,"forceReloaded",!1)}shouldTransitionTo(t){return this.snapshot.prefersViewTransitions&&t.prefersViewTransitions}renderPage(t,s=!1,i=!0,n){const u=this.isPageRefresh(n)&&this.snapshot.shouldMorphPage?sa:Zt,h=new u(this.snapshot,t,s,i);return h.shouldRender?n==null||n.changeHistory():this.forceReloaded=!0,this.render(h)}renderError(t,s){s==null||s.changeHistory();const i=new ta(this.snapshot,t,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:s}=this;await Hs();const i=t.clone();return this.snapshotCache.put(s,i),i}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}isPageRefresh(t){return!t||this.lastRenderedLocation.pathname===t.location.pathname&&t.action==="replace"}shouldPreserveScrollPosition(t){return this.isPageRefresh(t)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return Q.fromElement(this.element)}}var tt;class na{constructor(e,t){p(this,"selector","a[data-turbo-preload]");N(this,tt,()=>{this.preloadOnLoadLinksForView(document.body)});this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",k(this,tt)):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",k(this,tt))}preloadOnLoadLinksForView(e){for(const t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){const t=new URL(e.href);if(this.snapshotCache.has(t))return;await new lt(this,X.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{const s=await t.responseHTML,i=Q.fromHTMLString(s);this.snapshotCache.put(e.url,i)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}}tt=new WeakMap;var Oe,pt;class oa{constructor(e){N(this,Oe);this.session=e}clear(){this.session.clearCache()}resetCacheControl(){R(this,Oe,pt).call(this,"")}exemptPageFromCache(){R(this,Oe,pt).call(this,"no-cache")}exemptPageFromPreview(){R(this,Oe,pt).call(this,"no-preview")}}Oe=new WeakSet,pt=function(e){Nn("turbo-cache-control",e)};var st;class aa{constructor(e){p(this,"navigator",new Wo(this));p(this,"history",new No(this));p(this,"view",new ia(this,document.documentElement));p(this,"adapter",new Io(this));p(this,"pageObserver",new _o(this));p(this,"cacheObserver",new Do);p(this,"linkPrefetchObserver",new qo(this,document));p(this,"linkClickObserver",new sr(this,window));p(this,"formSubmitObserver",new Xt(this,document));p(this,"scrollObserver",new zo(this));p(this,"streamObserver",new Yo(this));p(this,"formLinkClickObserver",new rr(this,document.documentElement));p(this,"frameRedirector",new Bo(this,document.documentElement));p(this,"streamMessageRenderer",new Ko);p(this,"cache",new oa(this));p(this,"enabled",!0);p(this,"started",!1);N(this,st,150);this.recentRequests=e,this.preloader=new na(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){const s=t.frame?document.getElementById(t.frame):null;if(s instanceof Y){const i=t.action||be(s);s.delegate.proposeVisitIfNavigatedWithAction(s,i),s.src=e.toString()}else this.navigator.proposeVisit(z(e),t)}refresh(e,t){const s=t&&this.recentRequests.has(t),i=e===document.baseURI;!s&&!this.navigator.currentVisit&&i&&this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Ee.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=e}set progressBarDelay(e){_.drive.progressBarDelay=e}get progressBarDelay(){return _.drive.progressBarDelay}set drive(e){_.drive.enabled=e}get drive(){return _.drive.enabled}set formMode(e){_.forms.mode=e}get formMode(){return _.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return k(this,st)}set pageRefreshDebouncePeriod(e){this.refresh=Hn(this.debouncedRefresh.bind(this),e),H(this,st,e)}shouldPreloadLink(e){const t=e.hasAttribute("data-turbo-method"),s=e.hasAttribute("data-turbo-stream"),i=e.getAttribute("data-turbo-frame"),n=i=="_top"?null:document.getElementById(i)||Ce(e,"turbo-frame:not([disabled])");if(t||s||n instanceof Y)return!1;{const o=new URL(e.href);return this.elementIsNavigatable(e)&&oe(o,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,s){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:s}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&oe(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&oe(t,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(t)}willFollowLinkToLocation(e,t,s){return this.elementIsNavigatable(e)&&oe(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,s)}followedLinkToLocation(e,t){const s=this.getActionForLink(e),i=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:s,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){Es(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(yt(document.documentElement),this.view.markVisitDirection(e.direction)),Es(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),Et(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){const s=_t(e,t);return this.submissionIsNavigatable(e,t)&&oe(z(s),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){var e;(e=this.navigator.currentVisit)!=null&&e.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){const s=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:i,detail:{render:n}}=s;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!i}viewRenderedSnapshot(e,t,s){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(s)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,s){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,s).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,s){return x("turbo:click",{target:e,detail:{url:t.href,originalEvent:s},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return x("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return x("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return x("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return x("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return x("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return x("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return x("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return x("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(_.forms.mode=="off")return!1;{const s=t?this.elementIsNavigatable(t):!0;return _.forms.mode=="optin"?s&&e.closest('[data-turbo="true"]')!=null:s&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){const t=Ce(e,"[data-turbo]"),s=Ce(e,"turbo-frame");return _.drive.enabled||s?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return be(e)||"advance"}get snapshot(){return this.view.snapshot}}st=new WeakMap;function Es(r){Object.defineProperties(r,la)}const la={absoluteURL:{get(){return this.toString()}}},U=new aa(Ks),{cache:ca,navigator:ha}=U;function dr(){U.start()}function ua(r){U.registerAdapter(r)}function da(r,e){U.visit(r,e)}function fr(r){U.connectStreamSource(r)}function mr(r){U.disconnectStreamSource(r)}function fa(r){U.renderStreamMessage(r)}function ma(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),U.clearCache()}function pa(r){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),_.drive.progressBarDelay=r}function ga(r){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),_.forms.confirm=r}function ba(r){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),_.forms.mode=r}var va=Object.freeze({__proto__:null,navigator:ha,session:U,cache:ca,PageRenderer:Zt,PageSnapshot:Q,FrameRenderer:Qt,fetch:Js,config:_,start:dr,registerAdapter:ua,visit:da,connectStreamSource:fr,disconnectStreamSource:mr,renderStreamMessage:fa,clearCache:ma,setProgressBarDelay:pa,setConfirmMethod:ga,setFormMode:ba});class ya extends Error{}var Re,Z,ce,rt,Pe,Fe,F,Se,pr,gr,br,vr,yr,Er,wr,qt,Ae,Sr,gt,Ar,Tr,Mr;class Ea{constructor(e){N(this,F);p(this,"fetchResponseLoaded",e=>Promise.resolve());N(this,Re,null);N(this,Z,()=>{});N(this,ce,!1);N(this,rt,!1);N(this,Pe,new Set);N(this,Fe,!1);p(this,"action",null);p(this,"visitCachedSnapshot",({element:e})=>{const t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement});this.element=e,this.view=new mo(this,this.element),this.appearanceObserver=new Zn(this,this.element),this.formLinkClickObserver=new rr(this,this.element),this.linkInterceptor=new tr(this,this.element),this.restorationIdentifier=he(),this.formSubmitObserver=new Xt(this,this.element)}connect(){k(this,ce)||(H(this,ce,!0),this.loadingStyle==Te.lazy?this.appearanceObserver.start():R(this,F,Se).call(this),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){k(this,ce)&&(H(this,ce,!1),this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Te.eager&&R(this,F,Se).call(this)}sourceURLChanged(){R(this,F,Ar).call(this,"src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Te.eager||k(this,rt))&&R(this,F,Se).call(this))}sourceURLReloaded(){const{refresh:e,src:t}=this.element;return H(this,Fe,t&&e==="morph"),this.element.removeAttribute("complete"),this.element.src=null,this.element.src=t,this.element.loaded}loadingStyleChanged(){this.loadingStyle==Te.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),R(this,F,Se).call(this))}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{const t=await e.responseHTML;if(t){const s=Vs(t);Q.fromDocument(s).isVisitable?await R(this,F,pr).call(this,e,s):await R(this,F,vr).call(this,e)}}finally{H(this,Fe,!1),this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,be(e)),R(this,F,Se).call(this)}willSubmitFormLinkToLocation(e){return R(this,F,gt).call(this,e)}submittedFormLinkToLocation(e,t,s){const i=R(this,F,Ae).call(this,e);i&&s.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(e,t,s){return R(this,F,gt).call(this,e)}linkClickIntercepted(e,t){R(this,F,br).call(this,e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&R(this,F,gt).call(this,e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Mt(this,e,t);const{fetchRequest:s}=this.formSubmission;this.prepareRequest(s),this.formSubmission.start()}prepareRequest(e){var t;e.headers["Turbo-Frame"]=this.id,(t=this.currentNavigationElement)!=null&&t.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Ee.contentType)}requestStarted(e){yt(this.element)}requestPreventedHandlingResponse(e,t){k(this,Z).call(this)}async requestSucceededWithResponse(e,t){await this.loadResponse(t),k(this,Z).call(this)}async requestFailedWithResponse(e,t){await this.loadResponse(t),k(this,Z).call(this)}requestErrored(e,t){console.error(t),k(this,Z).call(this)}requestFinished(e){Et(this.element)}formSubmissionStarted({formElement:e}){yt(e,R(this,F,Ae).call(this,e))}formSubmissionSucceededWithResponse(e,t){const s=R(this,F,Ae).call(this,e.formElement,e.submitter);s.delegate.proposeVisitIfNavigatedWithAction(s,be(e.submitter,e.formElement,s)),s.delegate.loadResponse(t),e.isSafe||U.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),U.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){Et(e,R(this,F,Ae).call(this,e))}allowsImmediateRender({element:e},t){const s=x("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:i,detail:{render:n}}=s;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!i}viewRenderedSnapshot(e,t,s){}preloadOnLoadLinksForView(e){U.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){const s=Q.fromElement(e).clone(),{visitCachedSnapshot:i}=e.delegate;e.delegate.fetchResponseLoaded=async n=>{if(e.src){const{statusCode:o,redirected:u}=n,h=await n.responseHTML,b={response:{statusCode:o,redirected:u,responseHTML:h},visitCachedSnapshot:i,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:s};this.action&&(b.action=this.action),U.visit(e.src,b)}}}}changeHistory(){if(this.action){const e=xs(this.action);U.history.update(e,z(this.element.src||""),this.restorationIdentifier)}}async extractForeignFrameElement(e){let t;const s=CSS.escape(this.id);try{if(t=Ss(e.querySelector(`turbo-frame#${s}`),this.sourceURL),t)return t;if(t=Ss(e.querySelector(`turbo-frame[src][recurse~=${s}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(i){return console.error(i),new Y}return null}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){R(this,F,Tr).call(this,"src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||k(this,Z).call(this)!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&k(this,ce)}get rootLocation(){const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),t=(e==null?void 0:e.content)??"/";return z(t)}}Re=new WeakMap,Z=new WeakMap,ce=new WeakMap,rt=new WeakMap,Pe=new WeakMap,Fe=new WeakMap,F=new WeakSet,Se=async function(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=R(this,F,gr).call(this,z(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,H(this,rt,!0))},pr=async function(e,t){const s=await this.extractForeignFrameElement(t.body),i=k(this,Fe)?Eo:Qt;if(s){const n=new Ct(s),o=new i(this,this.view.snapshot,n,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(o),this.complete=!0,U.frameRendered(e,this.element),U.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else R(this,F,yr).call(this,e)&&R(this,F,Er).call(this,e)},gr=async function(e){var s;const t=new lt(this,X.get,e,new URLSearchParams,this.element);return(s=k(this,Re))==null||s.cancel(),H(this,Re,t),new Promise(i=>{H(this,Z,()=>{H(this,Z,()=>{}),H(this,Re,null),i()}),t.perform()})},br=function(e,t,s){const i=R(this,F,Ae).call(this,e,s);i.delegate.proposeVisitIfNavigatedWithAction(i,be(s,e,i)),R(this,F,Mr).call(this,e,()=>{i.src=t})},vr=async function(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await R(this,F,qt).call(this,e.response)},yr=function(e){this.element.setAttribute("complete","");const t=e.response,s=async(n,o)=>{n instanceof Response?R(this,F,qt).call(this,n):U.visit(n,o)};return!x("turbo:frame-missing",{target:this.element,detail:{response:t,visit:s},cancelable:!0}).defaultPrevented},Er=function(e){this.view.missing(),R(this,F,wr).call(this,e)},wr=function(e){const t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new ya(t)},qt=async function(e){const t=new zt(e),s=await t.responseHTML,{location:i,redirected:n,statusCode:o}=t;return U.visit(i,{response:{redirected:n,statusCode:o,responseHTML:s}})},Ae=function(e,t){const s=vt("data-turbo-frame",t,e)||this.element.getAttribute("target");return ws(s)??this.element},Sr=function(e,t){const s=_t(e,t);return oe(z(s),this.rootLocation)},gt=function(e,t){const s=vt("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!R(this,F,Sr).call(this,e,t)||!this.enabled||s=="_top")return!1;if(s){const i=ws(s);if(i)return!i.disabled}return!(!U.elementIsNavigatable(e)||t&&!U.elementIsNavigatable(t))},Ar=function(e){return k(this,Pe).has(e)},Tr=function(e,t){k(this,Pe).add(e),t(),k(this,Pe).delete(e)},Mr=function(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement};function ws(r){if(r!=null){const e=document.getElementById(r);if(e instanceof Y)return e}}function Ss(r,e){if(r){const t=r.getAttribute("src");if(t!=null&&e!=null&&Wn(t,e))throw new Error(`Matching <turbo-frame id="${r.id}"> element has a source URL which references itself`);if(r.ownerDocument!==document&&(r=document.importNode(r,!0)),r instanceof Y)return r.connectedCallback(),r.disconnectedCallback(),r}}const Cr={after(){this.targetElements.forEach(r=>{var e;return(e=r.parentElement)==null?void 0:e.insertBefore(this.templateContent,r.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.append(this.templateContent))},before(){this.targetElements.forEach(r=>{var e;return(e=r.parentElement)==null?void 0:e.insertBefore(this.templateContent,r)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.prepend(this.templateContent))},remove(){this.targetElements.forEach(r=>r.remove())},replace(){const r=this.getAttribute("method");this.targetElements.forEach(e=>{r==="morph"?Yt(e,this.templateContent):e.replaceWith(this.templateContent)})},update(){const r=this.getAttribute("method");this.targetElements.forEach(e=>{r==="morph"?nr(e,this.templateContent):(e.innerHTML="",e.append(this.templateContent))})},refresh(){U.refresh(this.baseURI,this.requestId)}};var pe,$e;const es=class es extends HTMLElement{constructor(){super(...arguments);N(this,pe)}static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){return this.renderPromise??(this.renderPromise=(async()=>{const t=this.beforeRenderEvent;this.dispatchEvent(t)&&(await xe(),await t.detail.render(this))})())}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){var i;const t=this.targetElements.flatMap(n=>[...n.children]).filter(n=>!!n.getAttribute("id")),s=[...((i=this.templateContent)==null?void 0:i.children)||[]].filter(n=>!!n.getAttribute("id")).map(n=>n.getAttribute("id"));return t.filter(n=>s.includes(n.getAttribute("id")))}get performAction(){if(this.action){const t=Cr[this.action];if(t)return t;R(this,pe,$e).call(this,"unknown action")}R(this,pe,$e).call(this,"action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;R(this,pe,$e).call(this,"target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;R(this,pe,$e).call(this,"first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:es.renderElement}})}get targetElementsById(){var s;const t=(s=this.ownerDocument)==null?void 0:s.getElementById(this.target);return t!==null?[t]:[]}get targetElementsByQuery(){var s;const t=(s=this.ownerDocument)==null?void 0:s.querySelectorAll(this.targets);return t.length!==0?Array.prototype.slice.call(t):[]}};pe=new WeakSet,$e=function(t){throw new Error(`${this.description}: ${t}`)};let Ht=es;class wa extends HTMLElement{constructor(){super(...arguments);p(this,"streamSource",null)}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),fr(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),mr(this.streamSource))}get src(){return this.getAttribute("src")||""}}Y.delegateConstructor=Ea;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Y);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Ht);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",wa);(()=>{let r=document.currentScript;if(r&&!r.hasAttribute("data-turbo-suppress-warning"))for(r=r.parentElement;r;){if(r==document.body)return console.warn($s`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,r.outerHTML);r=r.parentElement}})();window.Turbo={...va,StreamActions:Cr};dr();class Sa extends ye{}const As=[{enabled:!0,fetch:"eager",identifier:"live",controller:at},{enabled:!0,fetch:"eager",identifier:"symfony--ux-turbo--turbo-core",controller:Sa}];function Aa(r,e="default"){return class extends ye{constructor(t){t.logDebugActivity=function(s){this.application.logDebugActivity(this.identifier+"-lazywrapper",s)},super(t),this.__stimulusLazyController=!0}initialize(){this.application.controllers.find(t=>t.identifier===this.identifier&&t.__stimulusLazyController)||r().then(t=>{this.application.register(this.identifier,t[e])})}}}function Ta(){const r=Ti.start();r.debug=!1;for(const e of As)e.fetch==="lazy"?r.register(e.identifier,Aa(e.controller)):r.register(e.identifier,e.controller);return r.debug&&(console.groupCollapsed("application #startStimulusApp and register controllers from controllers.json"),console.log("controllers",As.map(e=>e.identifier)),console.groupEnd()),r}const Ma=Ta();Ma.debug=!1;
